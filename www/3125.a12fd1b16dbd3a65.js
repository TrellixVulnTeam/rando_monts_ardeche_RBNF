"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3125],{3125:(At,P,a)=>{a.r(P),a.d(P,{TrekDetailsPageModule:()=>vt});var c=a(9808),m=a(7232),s=a(786),v=a(2029),A=a(8504),D=a(4272),p=a(655),Q=a(4128),U=a(9646),L=a(590);const Y=(0,a(7423).fo)("Share",{web:()=>a.e(7907).then(a.bind(a,7907)).then(i=>new i.ShareWeb)});var d=a(5722),e=a(7587),Z=a(8317);function O(i,n){1&i&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"trek.downloadAlert.firstDownload")," "))}function q(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,O,3,3,"div",3),e.TgZ(2,"div"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div"),e._UZ(6,"ion-progress-bar",4),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.willDownloadGlobalMedia),e.xp6(2),e.hij(" ",e.lcZ(4,3,"trek.downloadAlert.loading")," "),e.xp6(3),e.Q6J("value",t.currentProgress)}}function S(i,n){1&i&&(e.TgZ(0,"div")(1,"div",6),e._UZ(2,"ion-spinner",7),e.TgZ(3,"div",8),e._uU(4),e.ALo(5,"translate"),e.qZA()()()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"trek.downloadAlert.storage")," "))}let M=(()=>{class i{constructor(t){this.offlineTreks=t,this.willDownloadGlobalMedia=!0}ngOnInit(){this.willDownloadGlobalMedia=this.offlineTreks.willDownloadCommonMedia(),this.currentProgress$=this.offlineTreks.currentProgressDownload$.subscribe(t=>{this.currentProgress=t})}ionViewWillLeave(){this.currentProgress$.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-progress"]],decls:5,vars:3,consts:[[1,"progress-container"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","ion-margin-bottom",4,"ngIf"],["type","determinate",3,"value"],[1,"ion-margin-bottom"],[2,"display","flex","justify-content","center","align-items","center"],["name","crescent"],[2,"margin-left","12px"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"ion-card")(2,"ion-card-content",1),e.YNc(3,q,7,5,"div",2),e.YNc(4,S,6,3,"div",2),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("ngSwitch",1!==r.currentProgress),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1))},directives:[s.PM,s.FN,c.RF,c.n9,c.O5,s.X7,s.PQ],pipes:[m.X$],styles:[""]}),i})();var C=a(5407),j=a(8413),E=a(4898),F=a(6289);function z(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("(",t.picture.author,")")}}function H(i,n){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"ion-img",4),e.TgZ(2,"div",5),e._uU(3),e.YNc(4,z,2,1,"span",0),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.picture.url),e.xp6(2),e.hij(" ",t.picture.legend," "),e.xp6(1),e.Q6J("ngIf",!!t.picture.author)}}function $(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-img",6),e.NdJ("ionError",function(){return e.CHM(t),e.oxw().onImgPracticeSrcError()}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("src",t.typeImgSrc)}}function B(i,n){if(1&i&&(e.TgZ(0,"div",7)(1,"ion-text"),e._UZ(2,"div",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.poi.properties.description,e.oJD)}}function G(i,n){if(1&i&&(e.TgZ(0,"div",7)(1,"ion-text")(2,"ion-label")(3,"h1"),e._uU(4,"Information pratiques"),e.qZA()(),e._UZ(5,"div",8),e.qZA()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("innerHTML",t.poi.properties.practical_info,e.oJD)}}function W(i,n){if(1&i&&e._UZ(0,"div",8),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.poi.properties.contact,e.oJD)}}function X(i,n){if(1&i&&(e.TgZ(0,"div")(1,"a",10),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href","mailto:"+!!t.poi.properties.email,e.LSH),e.xp6(1),e.hij(" ",t.poi.properties.email," ")}}function R(i,n){if(1&i&&(e.TgZ(0,"div")(1,"a",10),e._uU(2),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.poi.properties.website,e.LSH),e.xp6(1),e.hij(" ",t.poi.properties.website," ")}}function V(i,n){if(1&i&&(e.TgZ(0,"div")(1,"ion-text")(2,"ion-label")(3,"h1"),e._uU(4,"Contact"),e.qZA()(),e.YNc(5,W,1,1,"div",9),e.YNc(6,X,3,2,"div",0),e.YNc(7,R,3,2,"div",0),e.qZA()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.poi.properties.contact&&"null"!==t.poi.properties.contact),e.xp6(1),e.Q6J("ngIf",t.poi.properties.email&&"null"!==t.poi.properties.email),e.xp6(1),e.Q6J("ngIf",t.poi.properties.website&&"null"!==t.poi.properties.website)}}let K=(()=>{class i{constructor(t,r){this.offlineTreks=t,this.onlineTreks=r,this.offline=!1,this.baseUrl=d.N.onlineBaseUrl,this.picture=null,this.typeImgSrc=null,this.firstTryToLoadFromOnline=!0,this.hideImgPracticeSrc=!1}ngOnChanges(t){return(0,p.mG)(this,void 0,void 0,function*(){(t.poi||t.offline)&&(this.typePois&&this.poi.properties.type&&(this.currentTypePoi=this.typePois.values.find(r=>r.id===this.poi.properties.type),this.currentTypePoi&&(this.typeImgSrc=yield this.offlineTreks.getTrekImageSrc({},{url:this.currentTypePoi.pictogram}))),this.poi.properties.pictures.length>0?(this.picture=this.poi.properties.pictures[0],this.picture=Object.assign(Object.assign({},this.poi.properties.pictures[0]),this.offline?{url:yield this.offlineTreks.getTrekImageSrc({},this.poi.properties.pictures[0])}:{url:this.onlineTreks.getTrekImageSrc({},this.poi.properties.pictures[0])})):this.picture=null)})}onImgPracticeSrcError(){this.currentTypePoi.pictogram&&this.firstTryToLoadFromOnline?(this.firstTryToLoadFromOnline=!1,this.typeImgSrc=`${this.commonSrc}${this.currentTypePoi.pictogram}`):this.hideImgPracticeSrc=!0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.U),e.Y36(C.a))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-poi"]],inputs:{poi:"poi",offline:"offline",commonSrc:"commonSrc",typePois:"typePois"},features:[e.TTD],decls:11,vars:6,consts:[[4,"ngIf"],[1,"card-header-container"],["class","img-header",3,"src","ionError",4,"ngIf"],["class","ion-margin-bottom",4,"ngIf"],[1,"min-size-img",3,"src"],[1,"ion-padding-start","ion-padding-top","legend-text"],[1,"img-header",3,"src","ionError"],[1,"ion-margin-bottom"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf"],[3,"href"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-card"),e.YNc(1,H,5,3,"div",0),e.TgZ(2,"ion-card-header")(3,"div",1),e.YNc(4,$,1,1,"ion-img",2),e.TgZ(5,"ion-card-title"),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-card-content"),e.YNc(8,B,3,1,"div",3),e.YNc(9,G,6,1,"div",3),e.YNc(10,V,8,3,"div",0),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==r.picture),e.xp6(3),e.Q6J("ngIf",r.typeImgSrc&&!r.hideImgPracticeSrc),e.xp6(2),e.hij(" ",r.poi.properties.name," "),e.xp6(2),e.Q6J("ngIf",r.poi.properties.description),e.xp6(1),e.Q6J("ngIf",r.poi.properties.practical_info),e.xp6(1),e.Q6J("ngIf",r.poi.properties.contact||r.poi.properties.email||r.poi.properties.website))},directives:[s.PM,c.O5,s.Xz,s.Zi,s.Dq,s.FN,s.yW,s.Q$],styles:[".card-header-container[_ngcontent-%COMP%]{align-items:flex-end;display:flex}.card-header-container[_ngcontent-%COMP%]   .img-header[_ngcontent-%COMP%]{max-width:32px;max-height:32px;margin-right:16px}"]}),i})();function ee(i,n){1&i&&e.GkF(0)}const I=function(i){return{item:i}};function te(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ee,1,0,"ng-container",2),e.BQk()),2&i){const t=n.$implicit,r=e.oxw();e.xp6(1),e.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",e.VKq(2,I,t))}}function ie(i,n){1&i&&e.GkF(0)}function ne(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ie,1,0,"ng-container",2),e.BQk()),2&i){const t=n.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",e.VKq(2,I,t))}}function re(i,n){if(1&i&&(e.ynx(0),e.YNc(1,ne,2,4,"ng-container",0),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.expandableItems)}}function oe(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.showAllLabel," ")}}function se(i,n){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.hideAllLabel," ")}}function ae(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleExpandables()}),e.YNc(2,oe,2,1,"ng-container",4),e.YNc(3,se,2,1,"ng-container",4),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.expanded),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0)}}let ce=(()=>{class i{constructor(){this.initialSize=5,this.initialState="collapsed",this.alwaysDisplayedItems=[],this.expandableItems=[],this.expanded=!1}ngOnInit(){this.expanded="expanded"===this.initialState,this.alwaysDisplayedItems=this.items.slice(0,this.initialSize),this.expandableItems=this.items.slice(this.initialSize,this.items.length)}toggleExpandables(){this.expanded=!this.expanded}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-collapsible-list"]],inputs:{items:"items",showAllLabel:"showAllLabel",hideAllLabel:"hideAllLabel",initialSize:"initialSize",initialState:"initialState",itemTemplate:"itemTemplate"},decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fill","outline",3,"ngSwitch","click"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(e.YNc(0,te,2,4,"ng-container",0),e.YNc(1,re,2,1,"ng-container",1),e.YNc(2,ae,4,3,"ng-container",1)),2&t&&(e.Q6J("ngForOf",r.alwaysDisplayedItems),e.xp6(1),e.Q6J("ngIf",r.expanded),e.xp6(1),e.Q6J("ngIf",r.expandableItems.length>0))},directives:[c.sg,c.tP,c.O5,s.YG,c.RF,c.n9],styles:[""]}),i})();function le(i,n){if(1&i&&(e.TgZ(0,"ion-text"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.AsE("",e.lcZ(2,2,"trek.details.stage")," ",t.stageIndex+1," -")}}function pe(i,n){if(1&i&&(e.TgZ(0,"div",8),e.YNc(1,le,3,4,"ion-text",9),e.TgZ(2,"ion-text"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isStage),e.xp6(2),e.hij(" ",t.currentTrek.properties.name,"")}}function _e(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).presentDownloadConfirm()}),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"ion-icon",15),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"trek.offline")," "))}function ge(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",14),e.NdJ("click",function(o){return e.CHM(t),e.oxw(2).clickDeleteConfirm(o)}),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"ion-icon",16),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"trek.offline")," "))}function ue(i,n){if(1&i&&(e.TgZ(0,"ion-buttons",10),e.YNc(1,_e,4,3,"ion-button",11),e.YNc(2,ge,4,3,"ion-button",11),e.TgZ(3,"ion-button",12),e._uU(4," PDF "),e._UZ(5,"ion-icon",13),e.qZA(),e.TgZ(6,"ion-button",12),e._uU(7," GPX "),e._UZ(8,"ion-icon",13),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.offline&&!t.isAvailableOffline),e.xp6(1),e.Q6J("ngIf",t.isAvailableOffline&&!t.isStage),e.xp6(1),e.Q6J("href",t.apiUrl+"/"+t.currentTrek.properties.id+"/"+t.currentTrek.properties.slug+".pdf")("download",t.currentTrek.properties.slug+".pdf"),e.xp6(3),e.Q6J("href",t.apiUrl+"/"+t.currentTrek.properties.id+"/"+t.currentTrek.properties.slug+".gpx")("download",t.currentTrek.properties.slug+".gpx")}}function de(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-buttons",17)(1,"ion-button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().shareTrek()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"ion-icon",19),e.qZA()()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"trek.share")," "))}function fe(i,n){1&i&&(e.ynx(0),e.TgZ(1,"div",21),e._UZ(2,"ion-spinner",0),e.qZA(),e.BQk())}function me(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-connect-error",23),e.NdJ("retry",function(){return e.CHM(t),e.oxw(3).refresh()}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()}2&i&&e.Q6J("title",e.lcZ(1,3,"error.title"))("content",e.lcZ(2,5,"error.contentTrekMap"))("buttonText",e.lcZ(3,7,"error.buttonText"))}function xe(i,n){if(1&i&&e.YNc(0,me,4,9,"app-connect-error",22),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.connectionError&&!t.offline)}}function Te(i,n){if(1&i&&(e.ynx(0),e.YNc(1,fe,3,0,"ng-container",6),e.YNc(2,xe,1,1,"ng-template",null,20,e.W1O),e.BQk()),2&i){const t=e.MAs(3),r=e.oxw();e.xp6(1),e.Q6J("ngIf",!r.connectionError&&!r.offline&&!r.currentTrek)("ngIfElse",t)}}function he(i,n){if(1&i&&(e.TgZ(0,"ion-fab",25)(1,"ion-fab-button",26),e._UZ(2,"ion-icon",27),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("routerLink",t.mapLink)}}function ke(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.author,")")}}function ve(i,n){if(1&i&&(e.TgZ(0,"ion-slide")(1,"div",37),e._UZ(2,"ion-img",38),e.TgZ(3,"div",39),e._uU(4),e.YNc(5,ke,2,1,"span",9),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",t.url)("alt",t.title),e.xp6(2),e.hij(" ",t.legend," "),e.xp6(1),e.Q6J("ngIf",!!t.author)}}function Ze(i,n){if(1&i&&(e.TgZ(0,"ion-slides",35),e.YNc(1,ve,6,4,"ion-slide",36),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.pictures)}}function we(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",40),e._UZ(2,"div",41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.description_teaser,e.oJD)}}function Pe(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",42),e._UZ(2,"div",41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.ambiance,e.oJD)}}function Ae(i,n){1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()()()()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"trek.details.parents")," "))}const b=function(i,n){return{"next-previous-stage":i,"is-alone":n}};function Ce(i,n){if(1&i&&(e.TgZ(0,"ion-button",47),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"ion-icon",48),e.qZA()),2&i){const t=e.oxw(4);e.Q6J("routerLink",t.goToStep(t.previousTrek.properties.id))("ngClass",e.WLB(7,b,t.nextTrek,!t.nextTrek)),e.xp6(1),e.lnq(" ",e.lcZ(2,5,"trek.details.stage")," ",t.stageIndex," - ",t.previousTrek.properties.name," ")}}function Ie(i,n){if(1&i&&(e.TgZ(0,"ion-button",49),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"ion-icon",50),e.qZA()),2&i){const t=e.oxw(4);e.Q6J("routerLink",t.goToStep(t.nextTrek.properties.id))("ngClass",e.WLB(7,b,t.previousTrek,!t.previousTrek)),e.xp6(1),e.lnq(" ",e.lcZ(2,5,"trek.details.stage")," ",t.stageIndex+2," - ",t.nextTrek.properties.name," ")}}function be(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",43)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",44),e.YNc(8,Ce,4,10,"ion-button",45),e.YNc(9,Ie,4,10,"ion-button",46),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.parentTrek.properties.name),e.xp6(2),e.AsE(" ",t.parentTrek.properties.children.features.length," ",e.lcZ(6,5,"trek.details.stages")," "),e.xp6(3),e.Q6J("ngIf",t.previousTrek),e.xp6(1),e.Q6J("ngIf",t.nextTrek)}}function ye(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",51),e.NdJ("click",function(){e.CHM(t),e.oxw();const o=e.MAs(30);return e.oxw(2).scrollToStages(o)}),e._uU(3),e.ALo(4,"translate"),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(3),e.AsE(" ",t.currentTrek.properties.children.features.length," ",e.lcZ(4,2,"trek.details.stages")," ")}}function Je(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"trek.details.city")," ",null==t.currentTrek.properties.departure_city?null:t.currentTrek.properties.departure_city.name," ")}}function De(i,n){if(1&i&&(e.TgZ(0,"div")(1,"ion-text",0)(2,"h5",53),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Je,3,4,"div",9),e._uU(6),e.qZA()),2&i){const t=e.oxw(5);e.xp6(3),e.hij(" ",e.lcZ(4,3,"trek.details.departure")," "),e.xp6(2),e.Q6J("ngIf",t.currentTrek.properties.departure_city),e.xp6(1),e.hij(" ",t.currentTrek.properties.departure," ")}}function Qe(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(6);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"trek.details.city")," ",null==t.currentTrek.properties.arrival_city?null:t.currentTrek.properties.arrival_city.name," ")}}function Ue(i,n){if(1&i&&(e.TgZ(0,"div")(1,"ion-text",0)(2,"h5"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Qe,3,4,"div",9),e._uU(6),e.qZA()),2&i){const t=e.oxw(5);e.xp6(3),e.Oqu(e.lcZ(4,3,"trek.details.arrival")),e.xp6(2),e.Q6J("ngIf",t.currentTrek.properties.arrival_city),e.xp6(1),e.hij(" ",t.currentTrek.properties.arrival," ")}}function Le(i,n){if(1&i&&(e.TgZ(0,"div",43),e.YNc(1,De,7,5,"div",9),e.YNc(2,Ue,7,5,"div",9),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.departure&&t.currentTrek.properties.departure.length>0),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.arrival&&t.currentTrek.properties.arrival.length>0)}}function Ne(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"trek.details.city")," ",null==t.currentTrek.properties.departure_city?null:t.currentTrek.properties.departure_city.name," ")}}function Ye(i,n){if(1&i&&(e.TgZ(0,"div",43)(1,"ion-text",0)(2,"h5",53),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div"),e.YNc(6,Ne,3,4,"div",9),e.TgZ(7,"div"),e._uU(8),e.qZA()()()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",e.lcZ(4,3,"trek.details.departureArrival")," "),e.xp6(3),e.Q6J("ngIf",t.currentTrek.properties.departure_city),e.xp6(2),e.Oqu(t.currentTrek.properties.departure)}}function Oe(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col"),e.YNc(2,Le,3,2,"div",52),e.YNc(3,Ye,9,5,"div",52),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",(t.currentTrek.properties.departure||t.currentTrek.properties.arrival)&&t.currentTrek.properties.departure!==t.currentTrek.properties.arrival),e.xp6(1),e.Q6J("ngIf",(t.currentTrek.properties.departure||t.currentTrek.properties.arrival)&&t.currentTrek.properties.departure===t.currentTrek.properties.arrival)}}function qe(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(5);e.xp6(1),e.hij("",e.xi3(2,1,t.currentTrek.properties.duration%1*60,"1.0-0"),"min")}}function Se(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.ALo(3,"lowerRound"),e.YNc(4,qe,3,4,"span",9),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.xi3(2,2,e.lcZ(3,5,t.currentTrek.properties.duration),"1.0-0"),"h"),e.xp6(3),e.Q6J("ngIf",t.currentTrek.properties.duration%1>0)}}function Me(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.xi3(2,1,t.currentTrek.properties.duration/24,"1.0-0"),"j")}}function je(i,n){if(1&i&&(e.TgZ(0,"div",54),e._UZ(1,"ion-icon",55),e.YNc(2,Se,5,7,"span",9),e.YNc(3,Me,3,4,"span",9),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.currentTrek.properties.duration<24),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.duration>=24)}}function Ee(i,n){if(1&i&&(e.TgZ(0,"div",54),e._UZ(1,"ion-icon",56),e._uU(2),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.currentTrek.properties.ascent," m ")}}function Fe(i,n){if(1&i&&(e.TgZ(0,"div",54),e._UZ(1,"ion-icon",57),e._uU(2),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",t.currentTrek.properties.route.name," ")}}function ze(i,n){if(1&i&&e._UZ(0,"ion-img",59),2&i){const t=e.oxw(4);e.Q6J("src",t.trekExtraDetails.difficulty)}}function He(i,n){if(1&i&&(e.TgZ(0,"div",54),e.YNc(1,ze,1,1,"ion-img",58),e._uU(2),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.difficulty.pictogram),e.xp6(1),e.hij(" ",t.currentTrek.properties.difficulty.name," ")}}function $e(i,n){if(1&i&&(e.TgZ(0,"div",54),e._UZ(1,"ion-icon",60),e._uU(2),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.Dn7(3,1,t.currentTrek.properties.length/1e3,"1.1-1","fr")," km ")}}function Be(i,n){if(1&i&&e._UZ(0,"ion-img",59),2&i){const t=e.oxw(4);e.Udp("background-color",t.currentTrek.properties.practice.color),e.Q6J("src",t.trekExtraDetails.practice)}}function Ge(i,n){if(1&i&&(e.TgZ(0,"div",54),e.YNc(1,Be,1,3,"ion-img",61),e._uU(2),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.practice.pictogram),e.xp6(1),e.hij(" ",t.currentTrek.properties.practice.name," ")}}function We(i,n){if(1&i&&e._UZ(0,"ion-img",59),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.url)}}function Xe(i,n){if(1&i&&(e.TgZ(0,"ion-col",32)(1,"div"),e.YNc(2,We,1,1,"ion-img",58),e._uU(3),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Q6J("ngIf",t.pictogram),e.xp6(1),e.hij(" ",t.name," ")}}function Re(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",62)(2,"ion-text",0)(3,"h5"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.YNc(6,Xe,4,2,"ion-col",63),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.Oqu(e.lcZ(5,2,"trek.details.theme")),e.xp6(2),e.Q6J("ngForOf",t.trekExtraDetails.themes)}}function Ve(i,n){if(1&i&&(e.TgZ(0,"div")(1,"ion-text",0)(2,"h2",30),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e._UZ(5,"div",64),e.qZA()),2&i){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,2,"trek.details.description")," "),e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.description,e.oJD)}}function Ke(i,n){if(1&i&&e._UZ(0,"ion-img",59),2&i){const t=e.oxw().$implicit;e.Q6J("src",t.url)}}function et(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ke,1,1,"ion-img",58),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t.pictogram),e.xp6(2),e.Oqu(t.name)}}function tt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"ion-text",0)(2,"h5",65),e._uU(3,"Balisage"),e.qZA()(),e.YNc(4,et,4,2,"div",36),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.trekExtraDetails.networks)}}function it(i,n){if(1&i&&(e.TgZ(0,"div",68),e._UZ(1,"app-trek-card",69),e.qZA()),2&i){const t=n.$implicit,r=n.index,o=e.oxw(4);e.xp6(1),e.Q6J("isStage",!0)("numStage",r+1)("parentId",o.currentTrek.properties.id)("showAllData",!0)("trek",t)("offline",o.offline)}}function nt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"div")(3,"ion-text",0)(4,"h2",30),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",66),e.YNc(8,it,2,6,"div",67),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.AsE(" ",e.lcZ(6,3,"trek.details.stages")," (",t.currentTrek.properties.children.features.length,") "),e.xp6(3),e.Q6J("ngForOf",t.currentTrek.properties.children.features)}}function rt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"ion-img",70),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,2,"trek.details.profile")," "),e.xp6(3),e.Q6J("src",t.trekExtraDetails.profile)}}function ot(i,n){1&i&&(e.TgZ(0,"div"),e._UZ(1,"ion-img",71),e.qZA())}function st(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,ot,2,0,"div",9),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,3,"trek.details.rules")," "),e.xp6(3),e.Oqu(e.lcZ(8,5,"trek.details.rulesDescription")),e.xp6(2),e.Q6J("ngIf",t.showImgRulesIfParkCentered)}}function at(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"div",41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,2,"trek.details.access")," "),e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.access,e.oJD)}}function ct(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"div",41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,2,"trek.details.parking")," "),e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.advised_parking,e.oJD)}}function lt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"div",41),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,2,"trek.details.advice")," "),e.xp6(2),e.Q6J("innerHTML",t.currentTrek.properties.advice,e.oJD)}}function pt(i,n){if(1&i&&e._UZ(0,"ion-img",74),2&i){const t=e.oxw().$implicit,r=e.oxw(4);e.Q6J("src",r.baseUrl+t.picture)}}function _t(i,n){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"h3",41),e.YNc(2,pt,1,1,"ion-img",72),e._UZ(3,"div",41)(4,"div",41),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p")(8,"a",73),e._uU(9," Site web "),e.qZA(),e._uU(10," - "),e.TgZ(11,"a",73),e._uU(12," Email "),e.qZA(),e._uU(13," - "),e.TgZ(14,"a",73),e._uU(15),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("innerHTML",t.name,e.oJD),e.xp6(1),e.Q6J("ngIf",t.picture&&""!==t.picture),e.xp6(1),e.Q6J("innerHTML",t.description,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.street,e.oJD),e.xp6(2),e.AsE(" ",t.postal_code," ",t.municipality," "),e.xp6(2),e.Q6J("href",t.website,e.LSH),e.xp6(3),e.Q6J("href","mailto:"+t.email,e.LSH),e.xp6(3),e.Q6J("href","tel:"+t.phone,e.LSH),e.xp6(1),e.Oqu(t.phone)}}function gt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,_t,16,10,"div",36),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,2,"trek.details.desk")," "),e.xp6(2),e.Q6J("ngForOf",t.currentTrek.properties.information_desks)}}function ut(i,n){if(1&i&&e._UZ(0,"app-poi",77),2&i){const t=n.item,r=e.oxw(4);e.Q6J("poi",t)("commonSrc",r.commonSrc)("typePois",r.typePois)("offline",r.offline)}}function dt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.YNc(6,ut,1,4,"ng-template",null,75,e.W1O),e._UZ(8,"app-collapsible-list",76),e.ALo(9,"translate"),e.ALo(10,"translate"),e.qZA()()),2&i){const t=e.MAs(7),r=e.oxw(3);e.xp6(4),e.AsE(" ",e.lcZ(5,7,"trek.details.poi.name")," (",r.currentPois.length,") "),e.xp6(4),e.Q6J("items",r.currentPois)("showAllLabel",e.lcZ(9,9,"trek.details.poi.showAllLabel"))("hideAllLabel",e.lcZ(10,11,"trek.details.poi.hideAllLabel"))("itemTemplate",t)("initialSize",r.poiCollapseInitialSize)}}function ft(i,n){if(1&i&&e._UZ(0,"app-poi",79),2&i){const t=n.item,r=e.oxw(5);e.Q6J("poi",t)("offline",r.offline)}}function mt(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-text",0)(3,"h2",30),e._uU(4),e.qZA()(),e.YNc(5,ft,1,2,"ng-template",null,78,e.W1O),e._UZ(7,"app-collapsible-list",76),e.ALo(8,"translate"),e.ALo(9,"translate"),e.qZA()()),2&i){const t=n.$implicit,r=e.MAs(6),o=e.oxw(4);e.xp6(4),e.AsE(" ",t.name," (",t.features.length,") "),e.xp6(3),e.Q6J("items",t.features)("showAllLabel",e.lcZ(8,7,"trek.details.touristicContent.showAllLabel"))("hideAllLabel",e.lcZ(9,9,"trek.details.touristicContent.hideAllLabel"))("itemTemplate",r)("initialSize",o.touristicContentCollapseInitialSize)}}function xt(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,mt,10,11,"ion-row",36),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.touristicCategoriesWithFeatures)}}function Tt(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ze,2,1,"ion-slides",28),e.TgZ(2,"ion-grid",29),e.YNc(3,we,3,1,"ion-row",9),e.YNc(4,Pe,3,1,"ion-row",9),e.YNc(5,Ae,6,3,"ion-row",9),e.YNc(6,be,10,7,"ion-row",9),e.TgZ(7,"ion-row")(8,"ion-col")(9,"ion-text",0)(10,"h2",30),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.YNc(13,ye,5,4,"ion-row",9),e.YNc(14,Oe,4,2,"ion-row",9),e.TgZ(15,"ion-row",31)(16,"ion-col",32),e.YNc(17,je,4,2,"div",33),e.YNc(18,Ee,3,1,"div",33),e.YNc(19,Fe,3,1,"div",33),e.qZA(),e.TgZ(20,"ion-col",32),e.YNc(21,He,3,2,"div",33),e.YNc(22,$e,4,5,"div",33),e.YNc(23,Ge,3,2,"div",33),e.qZA()(),e.YNc(24,Re,7,4,"ion-row",9),e.TgZ(25,"ion-row")(26,"ion-col"),e.YNc(27,Ve,6,4,"div",9),e.YNc(28,tt,5,1,"div",9),e.qZA()(),e.TgZ(29,"div",null,34),e.YNc(31,nt,9,5,"ion-row",9),e.qZA(),e.YNc(32,rt,8,4,"ion-row",9),e.YNc(33,st,10,7,"ion-row",9),e.YNc(34,at,7,4,"ion-row",9),e.YNc(35,ct,7,4,"ion-row",9),e.YNc(36,lt,7,4,"ion-row",9),e.YNc(37,gt,7,4,"ion-row",9),e.YNc(38,dt,11,13,"ion-row",9),e.YNc(39,xt,2,1,"div",9),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.pictures&&t.currentTrek.properties.pictures.length>0),e.xp6(2),e.Q6J("ngIf",t.currentTrek.properties.description_teaser),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.ambiance),e.xp6(1),e.Q6J("ngIf",t.isStage),e.xp6(1),e.Q6J("ngIf",t.isStage),e.xp6(5),e.hij(" ",e.lcZ(12,26,"trek.details.features")," "),e.xp6(2),e.Q6J("ngIf",t.isItinerancy),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.departure||t.currentTrek.properties.arrival),e.xp6(3),e.Q6J("ngIf",t.currentTrek.properties.duration),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.ascent),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.route),e.xp6(2),e.Q6J("ngIf",t.currentTrek.properties.difficulty),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.length),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.practice),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.themes&&t.currentTrek.properties.themes.length>0),e.xp6(3),e.Q6J("ngIf",t.currentTrek.properties.description),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.networks&&t.currentTrek.properties.networks.length>0),e.xp6(3),e.Q6J("ngIf",t.isItinerancy),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.profile&&""!==t.currentTrek.properties.profile),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.is_park_centered),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.access),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.advised_parking),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.advice),e.xp6(1),e.Q6J("ngIf",t.currentTrek.properties.information_desks&&t.currentTrek.properties.information_desks.length>0),e.xp6(1),e.Q6J("ngIf",t.currentPois&&t.currentPois.length>0&&!t.isItinerancy),e.xp6(1),e.Q6J("ngIf",t.touristicCategoriesWithFeatures&&t.touristicCategoriesWithFeatures.length>0&&!t.isItinerancy)}}function ht(i,n){if(1&i&&(e.YNc(0,he,3,1,"ion-fab",24),e.YNc(1,Tt,40,28,"div",9)),2&i){const t=e.oxw();e.Q6J("ngIf",t.currentTrek),e.xp6(1),e.Q6J("ngIf",t.currentTrek)}}const kt=[{path:"",component:(()=>{class i{constructor(t,r,o,_,g,f,u,x,w,T){this.onlineTreks=t,this.offlineTreks=r,this.route=o,this.alertController=_,this.translate=g,this.modalController=f,this.platform=u,this.settings=x,this.loadingController=w,this.navController=T,this.offline=!1,this.baseUrl=d.N.onlineBaseUrl,this.showImgRulesIfParkCentered=d.N.trekDetails.showImgRulesIfParkCentered,this.treksUrl="",this.connectionError=!1,this.poiCollapseInitialSize=d.N.poiCollapseInitialSize,this.touristicContentCollapseInitialSize=d.N.touristicContentCollapseInitialSize,this.isItinerancy=!1,this.isStage=!1,this.isAvailableOffline=!1,this.apiUrl=`${d.N.apiUrl}/${this.translate.getDefaultLang()}/treks`,this.pictures=[],this.trekExtraDetails={difficulty:"",practice:"",themes:[],networks:[],profile:""}}ngOnInit(){this.loadTrek()}loadTrek(){return(0,p.mG)(this,void 0,void 0,function*(){const t=!!this.route.snapshot.data.offline,r=!!this.route.snapshot.data.isStage,o=+this.route.snapshot.paramMap.get("trekId"),_=+this.route.snapshot.paramMap.get("stageId"),g=r?_:o,f=r?o:void 0;this.isAvailableOffline=yield this.offlineTreks.trekIsAvailableOffline(o);const u=t||this.isAvailableOffline?this.offlineTreks:this.onlineTreks;(0,Q.D)([u.getTrekById(g,f),u.getPoisForTrekById(g,f),u.getTouristicContentsForTrekById(g,f),u.getTouristicEventsForTrekById(g,f),r&&f?u.getTrekById(f):(0,U.of)(null)]).pipe((0,L.P)()).subscribe(([x,w,T,Zt,h])=>(0,p.mG)(this,void 0,void 0,function*(){this.connectionError=!1;const y=yield u.getCommonImgSrc(),k=this.settings.getHydratedTrek(x,y),wt=this.settings.getTouristicCategoriesWithFeatures(T);this.settings.data$.value&&(this.typePois=this.settings.data$.value.find(l=>"poi_types"===l.id)),this.isItinerancy=!!(k.properties.children&&k.properties.children.features.length>0),this.offline=t||this.isAvailableOffline,this.currentTrek=k,this.originalTrek=x,this.currentPois=w.features,this.treksTool=u,this.touristicContents=T,this.touristicCategoriesWithFeatures=wt,this.touristicEvents=Zt.features,this.treksUrl=this.treksTool.getTreksUrl(),this.commonSrc=y,this.mapLink=this.treksTool.getTrekMapUrl(k.properties.id,h?h.properties.id:void 0),this.isStage=r,r&&h&&(this.parentTrek=h,this.stageIndex=this.parentTrek.properties.children.features.findIndex(l=>l.properties.id===this.currentTrek.properties.id),this.stageIndex>0&&(this.previousTrek=this.parentTrek.properties.children.features[this.stageIndex-1]),this.stageIndex<this.parentTrek.properties.children.features.length&&(this.nextTrek=this.parentTrek.properties.children.features[this.stageIndex+1])),this.currentTrek.properties.difficulty&&this.currentTrek.properties.difficulty.pictogram&&(this.trekExtraDetails.difficulty=yield this.getPictureSrc({url:this.currentTrek.properties.difficulty.pictogram})),this.currentTrek.properties.practice&&this.currentTrek.properties.practice.pictogram&&(this.trekExtraDetails.practice=yield this.getPictureSrc({url:this.currentTrek.properties.practice.pictogram})),this.currentTrek.properties.profile&&""!==this.currentTrek.properties.profile&&(this.trekExtraDetails.profile=yield this.getPictureSrc({url:this.currentTrek.properties.profile}));for(const l of this.currentTrek.properties.networks)this.trekExtraDetails.networks.push(Object.assign(Object.assign({},l),{url:yield this.getPictureSrc({url:l.pictogram})}));for(const l of this.currentTrek.properties.themes)this.trekExtraDetails.themes.push(Object.assign(Object.assign({},l),{url:yield this.getPictureSrc({url:l.pictogram})}));for(const l of this.currentTrek.properties.pictures){const Pt=yield this.getPictureSrc(l);this.pictures.push({picture:l,url:Pt})}const J=this.settings.data$.getValue();J&&(this.typePois=J.find(l=>"poi_types"===l.id))}),()=>{this.connectionError=!0})})}downloadTrek(){return(0,p.mG)(this,void 0,void 0,function*(){const t=this.onlineTreks.getMinimalTrekById(this.isStage?this.parentTrek.properties.id:this.currentTrek.properties.id),r=this.isStage?yield this.onlineTreks.getPoisForTrekById(this.parentTrek.properties.id).toPromise():this.currentPois,o=this.isStage?yield this.onlineTreks.getTouristicContentsForTrekById(this.parentTrek.properties.id).toPromise():this.currentPois;if(!t)return;this.offlineTreks.createNewProgressStream();const _=yield this.modalController.create({component:M,cssClass:"progress-modal"});yield _.present(),this.offlineTreks.saveTrek(t,this.isStage?this.parentTrek:this.originalTrek,r,o).subscribe(g=>(0,p.mG)(this,void 0,void 0,function*(){_.dismiss(),this.presentDownloadConfirm(!0,g),this.isAvailableOffline=yield this.offlineTreks.trekIsAvailableOffline(this.currentTrek.properties.id),this.loadTrek()}),g=>{_.dismiss(),this.presentDownloadConfirm(!0,g)})})}presentDownloadConfirm(t,r){return(0,p.mG)(this,void 0,void 0,function*(){yield this.translate.get("trek.downloadAlert").subscribe(o=>(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:o.titleTrek,message:t?r?o.success:o.error:this.isItinerancy||this.isStage?o.contentItinerancy:o.contentTrek,buttons:t?[o.confirmError]:[{text:o.cancelButton,role:"cancel",cssClass:"secondary"},{text:o.confirmButton,handler:()=>{this.downloadTrek()}}]})).present()}))})}getPictureSrc(t){return(0,p.mG)(this,void 0,void 0,function*(){return yield this.treksTool.getTrekImageSrc(this.originalTrek,t)})}refresh(){this.loadTrek()}shareTrek(){return(0,p.mG)(this,void 0,void 0,function*(){if(this.platform.is("ios")||this.platform.is("android")){const t=this.baseUrl.replace("mobile",""),r=3===d.N.randoVersion?`${t}${this.translate.getDefaultLang()}/trek/${this.currentTrek.properties.id}-${this.currentTrek.properties.slug}/`:`${t}${this.currentTrek.properties.practice.slug}/${this.currentTrek.properties.slug}/`,o={text:this.currentTrek.properties.name,title:d.N.appName,url:r};yield Y.share(o)}})}scrollToStages(t){t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}goToStep(t){return`/trek-details${this.offline?"-offline":""}/${this.parentTrek.properties.id}/${t}`}clickDeleteConfirm(t){t.stopPropagation(),this.presentDeleteConfirm()}deleteTrek(){return(0,p.mG)(this,void 0,void 0,function*(){const t=yield this.translate.get("trekCard").toPromise(),r=yield this.loadingController.create({message:t.deletionInProgress});yield r.present(),this.offlineTreks.removeTrek(this.currentTrek.properties.id,!0).subscribe(()=>{r.dismiss(),this.presentDeleteConfirm(!0,t.trekIsDelete),this.navController.pop()},()=>{r.dismiss(),this.presentDeleteConfirm(!0,t.errorWhileDeleting)})})}presentDeleteConfirm(t,r){return(0,p.mG)(this,void 0,void 0,function*(){const o=yield this.translate.get("trekCard").toPromise();yield(yield this.alertController.create({header:o.deleteTitle,message:t?r:o.askDelete,buttons:t?[o.confirmButton]:[{text:o.cancelButton,role:"cancel",cssClass:"secondary"},{text:o.deleteLabel,handler:()=>{this.deleteTrek()}}]})).present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.a),e.Y36(Z.U),e.Y36(v.gz),e.Y36(s.Br),e.Y36(m.sK),e.Y36(s.IN),e.Y36(s.t4),e.Y36(j.g),e.Y36(s.HT),e.Y36(s.SH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trek-details"]],decls:13,vars:6,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["class","custom-title",4,"ngIf"],["class","download-container",4,"ngIf"],["class","share-container",4,"ngIf"],[4,"ngIf","ngIfElse"],["trekDetailTemplate",""],[1,"custom-title"],[4,"ngIf"],[1,"download-container"],[3,"click",4,"ngIf"],["fill","clear","expand","full",3,"href","download"],["slot","start","name","document"],[3,"click"],["slot","start","name","download"],["slot","start","name","trash"],[1,"share-container"],["expand","full",3,"click"],["slot","start","name","share"],["connectError",""],[1,"spinner-container"],["icon","wifi",3,"title","content","buttonText","retry",4,"ngIf"],["icon","wifi",3,"title","content","buttonText","retry"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"no-outline",3,"routerLink"],["name","map"],["pager","true",4,"ngIf"],["fixed",""],[1,"custom-divider"],["marginTop","",1,"font-medium","ion-margin-top"],["size","6"],["class","extra-details",4,"ngIf"],["stages",""],["pager","true"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","column","align-items","center","justify-content","center"],[3,"src","alt"],[1,"ion-padding-top","legend-text"],[1,"bold"],[3,"innerHTML"],[1,"italic"],[1,"no-vertical-padding"],[1,"stage-container"],["class","stage-button stage-button-previous","fill","clear","expand","full","size","large",3,"routerLink","ngClass",4,"ngIf"],["class","stage-button stage-button-next","fill","clear","expand","full","size","large",3,"routerLink","ngClass",4,"ngIf"],["fill","clear","expand","full","size","large",1,"stage-button","stage-button-previous",3,"routerLink","ngClass"],["name","arrow-back","slot","start"],["fill","clear","expand","full","size","large",1,"stage-button","stage-button-next",3,"routerLink","ngClass"],["name","arrow-forward","slot","end"],["fill","outline",3,"click"],["class","no-vertical-padding",4,"ngIf"],[1,"no-margin-top"],[1,"extra-details"],["name","hourglass",1,"icon-detail"],["name","trending-up",1,"icon-detail"],["name","swap-horizontal-outline",1,"icon-detail"],["class","icon-detail",3,"src",4,"ngIf"],[1,"icon-detail",3,"src"],["name","resize",1,"icon-detail"],["class","icon-detail",3,"background-color","src",4,"ngIf"],["size","12"],["size","6",4,"ngFor","ngForOf"],[1,"trek-description",3,"innerHTML"],[1,"inline"],["scrollx","true",1,"treks-card-container"],["class","scroll-trek-item",4,"ngFor","ngForOf"],[1,"scroll-trek-item"],[3,"isStage","numStage","parentId","showAllData","trek","offline"],[3,"src"],["src","assets/image/reglementation.jpg","alt","rules"],["class","min-size-img",3,"src",4,"ngIf"],[3,"href"],[1,"min-size-img",3,"src"],["poiTemplate",""],[3,"items","showAllLabel","hideAllLabel","itemTemplate","initialSize"],[3,"poi","commonSrc","typePois","offline"],["touristicContentTemplate",""],[3,"poi","offline"]],template:function(t,r){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.YNc(4,pe,4,2,"div",3),e.qZA(),e.TgZ(5,"ion-toolbar"),e.YNc(6,ue,9,6,"ion-buttons",4),e.qZA(),e.TgZ(7,"ion-toolbar"),e.YNc(8,de,5,3,"ion-buttons",5),e.qZA()(),e.TgZ(9,"ion-content"),e.YNc(10,Te,4,2,"ng-container",6),e.YNc(11,ht,2,2,"ng-template",null,7,e.W1O),e.qZA()),2&t){const o=e.MAs(12);e.xp6(3),e.Q6J("defaultHref",r.treksUrl),e.xp6(1),e.Q6J("ngIf",r.currentTrek),e.xp6(2),e.Q6J("ngIf",r.currentTrek),e.xp6(2),e.Q6J("ngIf",r.currentTrek),e.xp6(2),e.Q6J("ngIf",r.connectionError&&!r.offline||!r.connectionError&&!r.offline&&!r.currentTrek)("ngIfElse",o)}},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,c.O5,s.yW,s.YG,s.gu,s.W2,s.PQ,E.t,s.IJ,s.W4,s.YI,v.rH,s.Hr,c.sg,s.A$,s.Xz,s.jY,s.Nd,s.wI,c.mk,F.Y,K,ce],pipes:[m.X$,c.JJ,A.K],styles:[".bold[_ngcontent-%COMP%]{font-weight:500}.italic[_ngcontent-%COMP%]{font-style:italic}.font-medium[_ngcontent-%COMP%]{font-size:18px}.extra-details[_ngcontent-%COMP%]{line-height:1.5;display:flex;justify-content:flex-start;align-items:center}.icon-detail[_ngcontent-%COMP%]{width:24px;height:24px;display:inline-block;margin-right:5px}ion-header[_ngcontent-%COMP%]   .custom-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;letter-spacing:.0125em}.custom-divider[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px;padding:5px 10px;background:var(--ion-color-primary)!important;color:var(--ion-color-primary-contrast)}div[scrollx=true][_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}div[scrollx=true][_ngcontent-%COMP%]::-webkit-scrollbar{display:none}div[scrollx=true][_ngcontent-%COMP%]   .scroll-trek-item[_ngcontent-%COMP%]{flex:0 0 auto;width:320px}.treks-card-container[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.no-vertical-padding[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.no-margin-top[_ngcontent-%COMP%]{margin-top:0}.stage-button[_ngcontent-%COMP%]{width:calc(50% - 5px);white-space:pre-wrap;height:auto;min-height:2.8em;background-color:rgba(var(--ion-color-primary-rgb),.04);text-transform:none;font-size:16px}.is-alone[_ngcontent-%COMP%]{width:100%}.stage-button-previous[_ngcontent-%COMP%]{margin-left:0}.stage-button-next[_ngcontent-%COMP%]{margin-right:0}@media screen and (min-width: 540px){.next-previous-stage[_ngcontent-%COMP%]{max-width:50%}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-previous[_ngcontent-%COMP%]{margin-right:5px}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-next[_ngcontent-%COMP%]{margin-left:5px}}@media screen and (max-width: 540px){.next-previous-stage[_ngcontent-%COMP%]{width:100%}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-previous[_ngcontent-%COMP%]{margin-right:0}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-next[_ngcontent-%COMP%]{margin-left:0}}.stage-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:5px}.download-container[_ngcontent-%COMP%], .share-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.download-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .share-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}"]}),i})()}];let vt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.ez,s.Pc,v.Bz.forChild(kt),A.H,D.e,m.aw.forChild()]]}),i})()}}]);