"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8425],{3036:(b,P,l)=>{l.d(P,{e:()=>g});var u=l(655),A=l(6052),n=l(7587),r=l(786),h=l(7232);let g=(()=>{class x{constructor(m){this.modalCtrl=m}ngOnInit(){}close(){return(0,u.mG)(this,void 0,void 0,function*(){yield A.K.set({key:"alreadyAskGeolocationPermission",value:JSON.stringify(!0)}),this.modalCtrl.dismiss()})}}return x.\u0275fac=function(m){return new(m||x)(n.Y36(r.IN))},x.\u0275cmp=n.Xpm({type:x,selectors:[["app-in-app-disclosure"]],decls:42,vars:27,consts:[[1,"ion-padding"],[1,"ion-text-center"],["color","primary","size","large","name","pin"],[1,"ion-margin-top"],[1,"ion-no-margin"],["expand","full",3,"click"],["color","white","slot","start","name","checkmark"]],template:function(m,y){1&m&&(n.TgZ(0,"ion-content",0)(1,"div",1),n._UZ(2,"ion-icon",2),n.qZA(),n.TgZ(3,"div")(4,"ion-text")(5,"h1"),n._uU(6),n.ALo(7,"translate"),n.qZA()()(),n.TgZ(8,"div",3)(9,"ion-text"),n._uU(10),n.ALo(11,"translate"),n.qZA()(),n.TgZ(12,"div",3)(13,"ion-text"),n._uU(14),n.ALo(15,"translate"),n.qZA()(),n.TgZ(16,"ul",4)(17,"li",3)(18,"ion-text"),n._uU(19),n.ALo(20,"translate"),n.qZA()(),n.TgZ(21,"li",3)(22,"ion-text"),n._uU(23),n.ALo(24,"translate"),n.qZA()(),n.TgZ(25,"li",3)(26,"ion-text"),n._uU(27),n.ALo(28,"translate"),n.qZA()(),n.TgZ(29,"li",3)(30,"ion-text"),n._uU(31),n.ALo(32,"translate"),n.qZA()()(),n.TgZ(33,"div",3)(34,"ion-text"),n._uU(35),n.ALo(36,"translate"),n.qZA()()(),n.TgZ(37,"ion-footer")(38,"ion-button",5),n.NdJ("click",function(){return y.close()}),n._UZ(39,"ion-icon",6),n._uU(40),n.ALo(41,"translate"),n.qZA()()),2&m&&(n.xp6(6),n.Oqu(n.lcZ(7,9,"inAppDisclosure.title")),n.xp6(4),n.hij(" ",n.lcZ(11,11,"inAppDisclosure.description")," "),n.xp6(4),n.hij(" ",n.lcZ(15,13,"inAppDisclosure.geolocateFeatures")," "),n.xp6(5),n.hij(" ",n.lcZ(20,15,"inAppDisclosure.geolocateForMap")," "),n.xp6(4),n.hij(" ",n.lcZ(24,17,"inAppDisclosure.geolocateForSort")," "),n.xp6(4),n.hij(" ",n.lcZ(28,19,"inAppDisclosure.geolocateForNavigate")," "),n.xp6(4),n.hij(" ",n.lcZ(32,21,"inAppDisclosure.geolocateForNotification")," "),n.xp6(4),n.hij(" ",n.lcZ(36,23,"inAppDisclosure.dataUsage")," "),n.xp6(5),n.hij(" ",n.lcZ(41,25,"inAppDisclosure.displayRequest")," "))},directives:[r.W2,r.gu,r.yW,r.fr,r.YG],pipes:[h.X$],styles:[""]}),x})()},9032:(b,P,l)=>{l.r(P),l.d(P,{MorePageModule:()=>S});var u=l(9808),A=l(2029),n=l(4272),r=l(786),h=l(7232),g=l(590),x=l(5722),o=l(7587),m=l(1931),y=l(4898);function k(a,v){1&a&&(o.ynx(0),o.TgZ(1,"div",4),o._UZ(2,"ion-spinner",0),o.qZA(),o.BQk())}function O(a,v){if(1&a){const p=o.EpF();o.TgZ(0,"app-connect-error",6),o.NdJ("retry",function(){return o.CHM(p),o.oxw(3).refresh()}),o.ALo(1,"translate"),o.ALo(2,"translate"),o.ALo(3,"translate"),o.qZA()}2&a&&o.Q6J("title",o.lcZ(1,3,"error.title"))("content",o.lcZ(2,5,"error.contentMore"))("buttonText",o.lcZ(3,7,"error.buttonText"))}function t(a,v){if(1&a&&o.YNc(0,O,4,9,"app-connect-error",5),2&a){const p=o.oxw(2);o.Q6J("ngIf",p.connectionError)}}function _(a,v){if(1&a&&(o.ynx(0),o.YNc(1,k,3,0,"ng-container",1),o.YNc(2,t,1,1,"ng-template",null,3,o.W1O),o.BQk()),2&a){const p=o.MAs(3),Z=o.oxw();o.xp6(1),o.Q6J("ngIf",!Z.moreInformationsIntro&&!Z.connectionError)("ngIfElse",p)}}function T(a,v){if(1&a&&(o.TgZ(0,"ion-item",9)(1,"ion-label")(2,"h3"),o._uU(3),o.qZA()()()),2&a){const p=v.$implicit;o.MGl("routerLink","/more/",p.id,""),o.xp6(3),o.Oqu(p.title)}}function C(a,v){if(1&a&&(o.TgZ(0,"div")(1,"ion-list"),o.YNc(2,T,4,2,"ion-item",8),o.qZA()()),2&a){const p=o.oxw(2);o.xp6(2),o.Q6J("ngForOf",p.moreInformationsIntro)}}function D(a,v){if(1&a&&o.YNc(0,C,3,1,"div",7),2&a){const p=o.oxw();o.Q6J("ngIf",p.moreInformationsIntro)}}const E=[{path:"",component:(()=>{class a{constructor(p){this.more=p,this.appName=x.N.appName,this.connectionError=!1}ngOnInit(){this.loadMoreItems()}loadMoreItems(){this.more.getMoreItems().pipe((0,g.P)()).subscribe(p=>{this.connectionError=!1,this.moreInformationsIntro=p},()=>{this.connectionError=!0})}refresh(){this.loadMoreItems()}}return a.\u0275fac=function(p){return new(p||a)(o.Y36(m.$))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-more"]],decls:8,vars:3,consts:[["color","primary"],[4,"ngIf","ngIfElse"],["moreInformationsIntroTemplate",""],["connectError",""],[1,"spinner-container"],["icon","wifi",3,"title","content","buttonText","retry",4,"ngIf"],["icon","wifi",3,"title","content","buttonText","retry"],[4,"ngIf"],["class","no-outline","detail","true",3,"routerLink",4,"ngFor","ngForOf"],["detail","true",1,"no-outline",3,"routerLink"]],template:function(p,Z){if(1&p&&(o.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),o._uU(3),o.qZA()()(),o.TgZ(4,"ion-content"),o.YNc(5,_,4,2,"ng-container",1),o.YNc(6,D,1,1,"ng-template",null,2,o.W1O),o.qZA()),2&p){const M=o.MAs(7);o.xp6(3),o.hij(" ",Z.appName," "),o.xp6(2),o.Q6J("ngIf",Z.connectionError||!Z.moreInformationsIntro)("ngIfElse",M)}},directives:[r.Gu,r.sr,r.wd,r.W2,u.O5,r.PQ,y.t,r.q_,u.sg,r.Ie,r.YI,A.rH,r.Q$],pipes:[h.X$],styles:[""]}),a})()}];let S=(()=>{class a{}return a.\u0275fac=function(p){return new(p||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[u.ez,r.Pc,A.Bz.forChild(E),n.e,h.aw.forChild()]]}),a})()},8425:(b,P,l)=>{l.r(P),l.d(P,{TabsPageModule:()=>K});var u=l(9808),A=l(4272),n=l(7232),r=l(786),h=l(2029),g=l(655),x=l(9841),o=l(5722),m=l(3036),y=l(1158),k=l(24),O=l(5857),t=l(7587),_=l(8413),T=l(1345);function C(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item",3)(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-radio",4),t.NdJ("click",function(){const f=t.CHM(e).$implicit;return t.oxw().treksOrderChange(f.value)}),t.qZA()()}if(2&i){const e=d.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("value",e.value)}}let D=(()=>{class i{constructor(e,s,c,f,I,U){this.navParams=e,this.settings=s,this.platform=c,this.popoverController=f,this.modalController=I,this.geolocate=U,this.isFirstCheck=!0}ngOnInit(){this.orders=this.navParams.get("orders"),this.orderSubscription=this.settings.order$.subscribe(e=>{this.currentOrder=e.type})}ngOnDestroy(){this.orderSubscription&&this.orderSubscription.unsubscribe()}treksOrderChange(e){return(0,g.mG)(this,void 0,void 0,function*(){let s=!1;if("location"===e)if(this.platform.is("ios")||this.platform.is("android")){let c;try{(yield this.geolocate.shouldShowInAppDisclosure())&&(yield this.presentInAppDisclosure()),c=yield this.geolocate.getCurrentPosition()}catch(f){s=!0}c?this.settings.saveOrderState(e,[c.longitude,c.latitude]):s=!0,yield this.popoverController.dismiss({error:s})}else"geolocation"in navigator&&((yield this.geolocate.shouldShowInAppDisclosure())&&(yield this.presentInAppDisclosure()),navigator.geolocation.getCurrentPosition(f=>(0,g.mG)(this,void 0,void 0,function*(){this.settings.saveOrderState(e,[f.coords.longitude,f.coords.latitude]),yield this.popoverController.dismiss()}),()=>(0,g.mG)(this,void 0,void 0,function*(){yield this.popoverController.dismiss({error:!0})})));else("alphabetical"===e||"random"===e)&&(this.settings.saveOrderState(e),yield this.popoverController.dismiss())})}presentInAppDisclosure(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:m.e,componentProps:{},cssClass:"full-size"});yield e.present(),yield e.onDidDismiss()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.X1),t.Y36(_.g),t.Y36(r.t4),t.Y36(r.Dh),t.Y36(r.IN),t.Y36(T.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-treks-order"]],decls:7,vars:5,consts:[["lines","inset"],[3,"value"],["class","no-lines",4,"ngFor","ngForOf"],[1,"no-lines"],["slot","end",3,"value","click"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-list",0)(1,"ion-radio-group",1)(2,"ion-list-header")(3,"ion-label"),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.YNc(6,C,4,2,"ion-item",2),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("value",s.currentOrder),t.xp6(3),t.Oqu(t.lcZ(5,3,"toolbar.orderTitle")),t.xp6(2),t.Q6J("ngForOf",s.orders))},directives:[r.q_,r.se,r.QI,r.yh,r.Q$,u.sg,r.Ie,r.B7,r.U5],pipes:[n.X$],styles:[".no-lines[_ngcontent-%COMP%]{--inner-border-width: 0px}"]}),i})();var L=l(8317),E=l(5407),S=l(6289),a=l(4898);const v=["content"];function p(i,d){if(1&i){const e=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-grid",5)(2,"ion-row")(3,"ion-col",6)(4,"ion-button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().presentFilters()}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"ion-button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().presentSearch()}),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"ion-col",9)(11,"ion-button",10),t.NdJ("click",function(c){return t.CHM(e),t.oxw().showTreksOrder(c)}),t._UZ(12,"ion-icon",11),t.qZA(),t.TgZ(13,"ion-button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeColSize()}),t._UZ(14,"ion-icon",12),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(5),t.AsE(" ",t.lcZ(6,4,"toolbar.filters")," ",e.numberOfActiveFilters," "),t.xp6(3),t.hij(" ",t.lcZ(9,6,"toolbar.search")," "),t.xp6(6),t.Q6J("name",12===e.colSize?"apps":"reorder-four-outline")}}function Z(i,d){1&i&&(t.TgZ(0,"h1",22),t._uU(1," treks.numberOftrek "),t.qZA())}function M(i,d){if(1&i&&(t.TgZ(0,"h1"),t._uU(1),t.TgZ(2,"span",22),t._uU(3,"treks.numberOftreks"),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.filteredTreks.length," ")}}function F(i,d){if(1&i&&(t.TgZ(0,"ion-col",23),t._UZ(1,"app-trek-card",24),t.qZA()),2&i){const e=d.$implicit,s=t.oxw(2);t.Q6J("size",s.colSize)("sizeMd",s.getMdColSize()),t.xp6(1),t.Q6J("showAllData",12===s.colSize)("trek",e)("offline",s.offline)}}const Y=function(i){return[i]};function B(i,d){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-list")(2,"ion-grid",13)(3,"ion-row",14)(4,"ion-text"),t.YNc(5,Z,2,0,"h1",15),t.YNc(6,M,4,1,"h1",1),t.qZA()(),t.TgZ(7,"ion-row",16),t.YNc(8,F,2,5,"ion-col",17),t.ALo(9,"slice"),t.qZA()()(),t.TgZ(10,"ion-infinite-scroll",18),t.NdJ("ionInfinite",function(c){return t.CHM(e),t.oxw().expandTreks(c)}),t._UZ(11,"ion-infinite-scroll-content"),t.qZA(),t.TgZ(12,"ion-fab",19)(13,"ion-fab-button",20),t._UZ(14,"ion-icon",21),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",1===e.filteredTreks.length),t.xp6(1),t.Q6J("ngIf",e.filteredTreks.length>1),t.xp6(2),t.Q6J("ngForOf",t.Dn7(9,5,e.filteredTreks,0,e.currentMaxTreks))("ngForTrackBy",e.trackTrek),t.xp6(5),t.Q6J("routerLink",t.VKq(9,Y,e.mapLink))}}function z(i,d){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-connect-error",26),t.NdJ("retry",function(){return t.CHM(e),t.oxw(2).loadTreks()}),t.ALo(2,"translate"),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.BQk()}2&i&&(t.xp6(1),t.Q6J("title",t.lcZ(2,3,"error.title"))("content",t.lcZ(3,5,"error.contentTreks"))("buttonText",t.lcZ(4,7,"error.buttonText")))}function G(i,d){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"ion-row")(2,"ion-col",22),t._uU(3," treks.noOfflineResults "),t.qZA()(),t.TgZ(4,"ion-row")(5,"ion-col")(6,"ion-button",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).resetFilters()}),t.TgZ(7,"span",22),t._uU(8," treks.showAllTreks "),t.qZA()()()(),t.BQk()}}function J(i,d){1&i&&(t.TgZ(0,"ion-row")(1,"ion-col")(2,"span",22),t._uU(3," treks.emptyOfflineTreks "),t.qZA()()())}function Q(i,d){if(1&i&&(t.ynx(0),t.TgZ(1,"ion-grid",27),t.YNc(2,G,9,0,"ng-container",28),t.YNc(3,J,4,0,"ion-row",28),t.qZA(),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngSwitch",e.nbOfflineTreks>0),t.xp6(1),t.Q6J("ngSwitchCase",!0),t.xp6(1),t.Q6J("ngSwitchCase",!1)}}function w(i,d){if(1&i&&(t.YNc(0,z,5,9,"ng-container",3),t.YNc(1,Q,4,3,"ng-template",null,25,t.W1O)),2&i){const e=t.MAs(2),s=t.oxw();t.Q6J("ngIf",!s.offline)("ngIfElse",e)}}let N=(()=>{class i{constructor(e,s,c,f,I,U,X,q,V,tt,et,nt){this.filterTreks=e,this.modalController=s,this.offlineTreks=c,this.onlineTreks=f,this.geolocate=I,this.settings=U,this.route=X,this.router=q,this.platform=V,this.popoverController=tt,this.translate=et,this.alertController=nt,this.appName=o.N.appName,this.treksByStep=o.N.treksByStep,this.colSize=o.N.colSize,this.nbOfflineTreks=0,this.offline=!1,this.currentMaxTreks=o.N.treksByStep}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){yield this.handleInitialOrder(),this.treksTool||(this.offline=!!this.route.snapshot.data.offline,this.treksTool=this.offline?this.offlineTreks:this.onlineTreks,this.mapLink=this.treksTool.getTreksMapUrl()),this.filteredTreksSubscription=(0,x.a)([this.offline?this.offlineTreks.filteredTreks$:this.onlineTreks.filteredTreks$,this.filterTreks.activeFiltersNumber$,this.settings.data$]).subscribe(([s,c,f])=>{f&&(this.numberOfActiveFilters=c?`(${c})`:"",this.filteredTreks=[...s],this.content.scrollToTop())}),this.nbOfflineTreksSubscription=this.offlineTreks.treks$.subscribe(s=>{this.nbOfflineTreks=s?s.features.length:0})})}ngOnDestroy(){this.filteredTreksSubscription&&this.filteredTreksSubscription.unsubscribe(),this.nbOfflineTreksSubscription&&this.nbOfflineTreksSubscription.unsubscribe()}handleInitialOrder(){return(0,g.mG)(this,void 0,void 0,function*(){if(!this.settings.order$.value)if("location"===o.N.initialOrder){let e;const s=yield this.geolocate.shouldShowInAppDisclosure();try{s&&(yield this.presentInAppDisclosure()),e=yield this.geolocate.getCurrentPosition()}finally{e?this.settings.saveOrderState(o.N.initialOrder,[e.longitude,e.latitude]):(s&&(yield this.presentGeolocateError()),this.settings.saveOrderState("alphabetical"))}}else this.settings.saveOrderState(o.N.initialOrder)})}expandTreks(e){this.currentMaxTreks<this.filteredTreks.length&&(this.currentMaxTreks+this.treksByStep>this.filteredTreks.length?this.currentMaxTreks=this.filteredTreks.length:this.currentMaxTreks+=this.treksByStep),e.target.complete()}changeColSize(){this.colSize=12===this.colSize?6:12,this.content.scrollToTop()}getMdColSize(){return this.colSize/2}presentFilters(){return(0,g.mG)(this,void 0,void 0,function*(){yield(yield this.modalController.create({component:y.b,componentProps:{isOnline:!this.offline},cssClass:"full-size"})).present()})}presentSearch(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:k.g,componentProps:{isOnline:!this.offline},cssClass:"full-size"});yield e.present();const{data:s}=yield e.onDidDismiss();s&&this.navigateToTrek(s)})}navigateToTrek(e){this.router.navigate([this.treksTool.getTrekDetailsUrl(e)])}resetFilters(){this.settings.resetFilters()}trackTrek(e,s){return s?s.properties.id:null}showTreksOrder(e){return(0,g.mG)(this,void 0,void 0,function*(){const s=[{name:yield this.translate.get("toolbar.orderByAlphabet").toPromise(),value:"alphabetical"},{name:yield this.translate.get("toolbar.orderByLocation").toPromise(),value:"location"},{name:yield this.translate.get("toolbar.orderByRandom").toPromise(),value:"random"}],c=yield this.popoverController.create({component:D,event:e,translucent:!0,componentProps:{orders:s}});yield c.present();const{data:f}=yield c.onDidDismiss();f&&f.error&&this.presentGeolocateError()})}presentGeolocateError(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.translate.get("geolocate.error").toPromise(),s=yield this.alertController.create({header:e.header,subHeader:e.subHeader,message:e.message,buttons:[e.confirmButton]});yield s.present(),yield s.onDidDismiss()})}loadTreks(){this.settings.loadSettings(),this.onlineTreks.loadTreks()}presentInAppDisclosure(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:m.e,componentProps:{},cssClass:"full-size"});yield e.present(),yield e.onDidDismiss()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(O.Z),t.Y36(r.IN),t.Y36(L.U),t.Y36(E.a),t.Y36(T.x),t.Y36(_.g),t.Y36(h.gz),t.Y36(h.F0),t.Y36(r.t4),t.Y36(r.Dh),t.Y36(n.sK),t.Y36(r.Br))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-treks"]],viewQuery:function(e,s){if(1&e&&t.Gf(v,7),2&e){let c;t.iGM(c=t.CRH())&&(s.content=c.first)}},features:[t._Bn([O.Z])],decls:12,vars:8,consts:[["color","primary"],[4,"ngIf"],["content",""],[4,"ngIf","ngIfElse"],["noTreks",""],[1,"ion-no-padding"],["size","auto",1,"vertical-center","ion-margin-start"],["color","light","size","small",1,"custom-button",3,"click"],["color","light","size","small",1,"custom-button","ion-margin-start",3,"click"],[1,"ion-text-right"],["fill","clear","color","dark",1,"toolbar-icon-button",3,"click"],["slot","icon-only","name","swap-horizontal-outline","size","large"],["size","large",3,"name"],["fixed",""],["size","12",1,"ion-padding-start"],["translate","",4,"ngIf"],[1,"ion-align-items-stretch"],[3,"size","sizeMd",4,"ngFor","ngForOf","ngForTrackBy"],["threshold","100px",3,"ionInfinite"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"no-outline",3,"routerLink"],["name","globe"],["translate",""],[3,"size","sizeMd"],[3,"showAllData","trek","offline"],["noTreksOffline",""],["icon","wifi",3,"title","content","buttonText","retry"],[1,"flex-container",3,"ngSwitch"],[4,"ngSwitchCase"],["color","light",3,"click"]],template:function(e,s){if(1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3),t.qZA()(),t.YNc(4,p,15,8,"ion-toolbar",1),t.ALo(5,"async"),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"ion-content",null,2),t.YNc(9,B,15,11,"ng-container",3),t.YNc(10,w,3,2,"ng-template",null,4,t.W1O),t.qZA()),2&e){const c=t.MAs(11);t.xp6(3),t.hij(" ",s.appName," "),t.xp6(1),t.Q6J("ngIf",(!t.lcZ(5,4,s.onlineTreks.onlineTreksError$)||!t.lcZ(6,6,s.settings.settingsError$))&&!s.offline||s.offline&&s.nbOfflineTreks>0),t.xp6(5),t.Q6J("ngIf",!!s.filteredTreks&&s.filteredTreks.length>0)("ngIfElse",c)}},directives:[r.Gu,r.sr,r.wd,u.O5,r.jY,r.Nd,r.wI,r.YG,r.gu,r.W2,r.q_,r.yW,n.Pi,u.sg,S.Y,r.ju,r.MB,r.IJ,r.W4,r.YI,h.rH,a.t,u.RF,u.n9],pipes:[u.Ov,n.X$,u.OU],styles:[".list-mode-disabled[_ngcontent-%COMP%]{cursor:default;opacity:.5;pointer-events:none}.custom-button[_ngcontent-%COMP%]{width:100px;text-transform:capitalize}.vertical-center[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-icon-button[_ngcontent-%COMP%]::part(native){font-size:10px}"]}),i})();const W=[{path:"tabs",component:(()=>{class i{constructor(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-tabs"]],decls:14,vars:9,consts:[["color","primary","slot","bottom"],["tab","treks"],["name","walk"],["tab","treks-offline"],["name","save"],["tab","more"],["name","information-circle-outline"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),t._UZ(3,"ion-icon",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"ion-tab-button",3),t._UZ(7,"ion-icon",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"ion-tab-button",5),t._UZ(11,"ion-icon",6),t._uU(12),t.ALo(13,"translate"),t.qZA()()()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,3,"tabbar.treks")," "),t.xp6(4),t.hij(" ",t.lcZ(9,5,"tabbar.offline")," "),t.xp6(4),t.hij(" ",t.lcZ(13,7,"tabbar.more")," "))},directives:[r.UN,r.yq,r.ZU,r.gu],pipes:[n.X$],styles:[""]}),i})(),children:[{path:"treks",children:[{path:"",component:N}]},{path:"treks-offline",children:[{path:"",component:N,data:{offline:!0}}]},{path:"more",children:[{path:"",loadChildren:()=>Promise.resolve().then(l.bind(l,9032)).then(i=>i.MorePageModule)}]}]},{path:"",redirectTo:"/tabs/treks",pathMatch:"full"}];let $=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(W)],h.Bz]}),i})();var j=l(8504);let H=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,r.Pc,j.H,A.e,h.Bz.forChild([]),n.aw.forChild()]]}),i})();var R=l(9032);let K=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,r.Pc,$,H,R.MorePageModule,n.aw.forChild(),A.e]]}),i})()},1345:(b,P,l)=>{l.d(P,{x:()=>y});var u=l(655),A=l(1135),n=l(7423),r=l(6052),h=l(7587),g=l(786),x=l(7232),o=l(9397);const m=(0,n.fo)("BackgroundGeolocation");let y=(()=>{class k{constructor(t,_,T){this.platform=t,this.translate=_,this.deviceOrientation=T,this.currentPosition$=new A.X(null),this.currentHeading$=new A.X(null),this.currentWatchId=null}shouldShowInAppDisclosure(){return(0,u.mG)(this,void 0,void 0,function*(){return!(yield r.K.get({key:"alreadyAskGeolocationPermission"})).value})}checkIfCanGetCurrentHeading(){return(0,u.mG)(this,void 0,void 0,function*(){return!!(yield new Promise(_=>{this.deviceOrientation.getCurrentHeading().then(T=>_(T),()=>_(null))}))})}startOnMapTracking(){return(0,u.mG)(this,void 0,void 0,function*(){if(this.platform.is("ios")||this.platform.is("android")){const t=yield this.translate.get("geolocate.notificationTitle").toPromise();m.addWatcher({backgroundTitle:t,requestPermissions:!0,stale:!1,distanceFilter:2},_=>{this.currentPosition$.next(_)}).then(_=>{this.currentWatchId=_,this.deviceOrientationSubscription=this.deviceOrientation.watchHeading({frequency:200}).subscribe(T=>this.currentHeading$.next(T.magneticHeading))})}})}stopOnMapTracking(){(this.platform.is("ios")||this.platform.is("android"))&&(this.deviceOrientationSubscription&&this.deviceOrientationSubscription.unsubscribe(),this.currentWatchId&&m.removeWatcher({id:this.currentWatchId}).then(()=>{this.currentWatchId=null}))}getCurrentPosition(){return(0,u.mG)(this,void 0,void 0,function*(){return new Promise(t=>(0,u.mG)(this,void 0,void 0,function*(){if(this.platform.is("ios")||this.platform.is("android")){let _;m.addWatcher({requestPermissions:!0,stale:!0},T=>{_=T||null}).then(T=>{setTimeout(()=>{t(_),m.removeWatcher({id:T})},500)})}else t(null)}))})}}return k.\u0275fac=function(t){return new(t||k)(h.LFG(g.t4),h.LFG(x.sK),h.LFG(o.h))},k.\u0275prov=h.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})()}}]);