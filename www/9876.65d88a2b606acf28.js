"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9876],{9876:(Ct,x,m)=>{m.r(x),m.d(x,{TrekMapPageModule:()=>yt});var _=m(9808),C=m(2029),r=m(786),S=m(4272),T=m(7232),f=m(655),L=m(4128),M=m(9646),A=m(590),p=m(5722),t=m(7587),b=m(8413),P=m(8317),I=m(5407);function z(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-img",9),t.NdJ("ionError",function(){return t.CHM(e),t.oxw(2).onImgPracticeSrcError()}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("src",e.typeImgSrc)}}function F(s,a){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij("(",e.poi.properties.pictures[0].author,")")}}function O(s,a){if(1&s&&(t.TgZ(0,"div"),t._UZ(1,"ion-img",6),t.TgZ(2,"div",7),t.YNc(3,z,1,1,"ion-img",8),t._uU(4),t.YNc(5,F,2,1,"span",4),t.qZA()()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("src",null==e.picture?null:e.picture.url),t.xp6(2),t.Q6J("ngIf",e.typeImgSrc&&!e.hideImgPracticeSrc),t.xp6(1),t.hij(" ",null==e.poi.properties.pictures[0]?null:e.poi.properties.pictures[0].legend," "),t.xp6(1),t.Q6J("ngIf",!(null==e.poi.properties.pictures[0]||!e.poi.properties.pictures[0].author))}}function w(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"ion-text"),t._UZ(2,"div",11),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("innerHTML",e.poi.properties.description,t.oJD)}}function J(s,a){if(1&s&&(t.TgZ(0,"div",10)(1,"ion-text")(2,"ion-label")(3,"h1",12),t._uU(4,"trek.details.usefulInformation"),t.qZA()(),t._UZ(5,"div",11),t.qZA()()),2&s){const e=t.oxw();t.xp6(5),t.Q6J("innerHTML",e.poi.properties.practical_info,t.oJD)}}function U(s,a){if(1&s&&t._UZ(0,"div",11),2&s){const e=t.oxw(2);t.Q6J("innerHTML",e.poi.properties.contact,t.oJD)}}function Y(s,a){if(1&s&&(t.TgZ(0,"div")(1,"a",14),t._uU(2),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("href","mailto:"+!!e.poi.properties.email,t.LSH),t.xp6(1),t.hij(" ",e.poi.properties.email," ")}}function E(s,a){if(1&s&&(t.TgZ(0,"div")(1,"a",14),t._uU(2),t.qZA()()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("href",e.poi.properties.website,t.LSH),t.xp6(1),t.hij(" ",e.poi.properties.website," ")}}function Q(s,a){if(1&s&&(t.TgZ(0,"div")(1,"ion-text")(2,"ion-label")(3,"h1",12),t._uU(4,"trek.details.contact"),t.qZA()(),t.YNc(5,U,1,1,"div",13),t.YNc(6,Y,3,2,"div",4),t.YNc(7,E,3,2,"div",4),t.qZA()()),2&s){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.poi.properties.contact&&"null"!==e.poi.properties.contact),t.xp6(1),t.Q6J("ngIf",e.poi.properties.email&&"null"!==e.poi.properties.email),t.xp6(1),t.Q6J("ngIf",e.poi.properties.website&&"null"!==e.poi.properties.website)}}let G=(()=>{class s{constructor(e,i,o,c,l){this.modalCtrl=e,this.navParams=i,this.settings=o,this.offlineTreks=c,this.onlineTreks=l,this.offline=!1,this.baseUrl=p.N.onlineBaseUrl,this.poiImg="",this.typeImgSrc=null,this.picture=null,this.firstTryToLoadFromOnline=!0,this.hideImgPracticeSrc=!1}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){this.poi=this.navParams.get("poi"),this.offline=this.navParams.get("offline"),this.commonSrc=this.navParams.get("commonSrc"),this.poi&&this.poi.properties&&this.poi.properties.pictures&&this.poi.properties.pictures.length>0&&this.poi.properties.pictures[0].url?(this.picture=this.poi.properties.pictures[0],this.picture=Object.assign(Object.assign({},this.poi.properties.pictures[0]),this.offline?{url:yield this.offlineTreks.getTrekImageSrc({},this.poi.properties.pictures[0])}:{url:this.onlineTreks.getTrekImageSrc({},this.poi.properties.pictures[0])})):this.picture=null,this.settingsSub=this.settings.data$.subscribe(e=>(0,f.mG)(this,void 0,void 0,function*(){if(e){const i=e.find(o=>"poi_types"===o.id);i&&this.poi.properties.type&&(this.currentTypePoi=i.values.find(o=>o.id===this.poi.properties.type),this.currentTypePoi&&(this.typeImgSrc=yield this.offlineTreks.getTrekImageSrc({},{url:this.currentTypePoi.pictogram})))}}))})}close(){this.settingsSub.unsubscribe(),this.modalCtrl.dismiss()}onImgPracticeSrcError(){this.currentTypePoi.pictogram&&this.firstTryToLoadFromOnline?(this.firstTryToLoadFromOnline=!1,this.typeImgSrc=`${this.commonSrc}${this.currentTypePoi.pictogram}`):this.hideImgPracticeSrc=!0}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.IN),t.Y36(r.X1),t.Y36(b.g),t.Y36(P.U),t.Y36(I.a))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-poi-details"]],decls:14,vars:5,consts:[["color","primary"],["slot","start"],[3,"click"],["size","large","slot","start","name","close"],[4,"ngIf"],["class","ion-margin-bottom",4,"ngIf"],[1,"min-size-img",3,"src"],[1,"card-legend","ion-padding-start","ion-padding-top","legend-text"],["class","img-legend",3,"src","ionError",4,"ngIf"],[1,"img-legend",3,"src","ionError"],[1,"ion-margin-bottom"],[3,"innerHTML"],["translate",""],[3,"innerHTML",4,"ngIf"],[3,"href"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return i.close()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-content")(8,"ion-card"),t.YNc(9,O,6,4,"div",4),t.TgZ(10,"ion-card-content"),t.YNc(11,w,3,1,"div",5),t.YNc(12,J,6,1,"div",5),t.YNc(13,Q,8,3,"div",4),t.qZA()()()),2&e&&(t.xp6(6),t.Oqu(i.poi.properties.name),t.xp6(3),t.Q6J("ngIf",i.picture&&""!==(null==i.picture?null:i.picture.url)),t.xp6(2),t.Q6J("ngIf",i.poi.properties.description),t.xp6(1),t.Q6J("ngIf",i.poi.properties.practical_info),t.xp6(1),t.Q6J("ngIf",i.poi.properties.contact||i.poi.properties.email||i.poi.properties.website))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.PM,_.O5,r.Xz,r.FN,r.yW,r.Q$,T.Pi],styles:[".card-legend[_ngcontent-%COMP%]{align-items:flex-end;display:flex}.card-legend[_ngcontent-%COMP%]   .img-legend[_ngcontent-%COMP%]{max-width:32px;max-height:32px;margin-right:16px}"]}),s})();function j(s,a){if(1&s&&t._UZ(0,"ion-img",7),2&s){const e=t.oxw();t.Q6J("src",e.informationDeskPicture)}}let H=(()=>{class s{constructor(e,i){this.modalCtrl=e,this.navParams=i,this.baseUrl=p.N.onlineBaseUrl,this.informationDeskPicture=""}ngOnInit(){this.informationDesk=this.navParams.get("informationDesk"),this.informationDesk&&this.informationDesk.picture&&(this.informationDeskPicture=`${this.baseUrl}${this.informationDesk.picture}`)}close(){this.modalCtrl.dismiss()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.IN),t.Y36(r.X1))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-information-desk-details"]],decls:25,vars:13,consts:[["color","primary"],["slot","start"],[3,"click"],["size","large","slot","start","name","close"],["class","min-size-img",3,"src",4,"ngIf"],[3,"innerHTML"],[3,"href"],[1,"min-size-img",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return i.close()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-content")(8,"ion-card"),t.YNc(9,j,1,1,"ion-img",4),t.TgZ(10,"ion-card-content"),t._UZ(11,"div",5)(12,"div",5),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"a",6),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._uU(19," - "),t.TgZ(20,"a",6),t._uU(21," Email "),t.qZA(),t._uU(22," - "),t.TgZ(23,"a",6),t._uU(24),t.qZA()()()()()),2&e&&(t.xp6(6),t.Oqu(i.informationDesk.name),t.xp6(3),t.Q6J("ngIf",""!==i.informationDesk.picture),t.xp6(2),t.Q6J("innerHTML",i.informationDesk.description,t.oJD),t.xp6(1),t.Q6J("innerHTML",i.informationDesk.street,t.oJD),t.xp6(2),t.AsE(" ",i.informationDesk.postal_code," ",i.informationDesk.municipality," "),t.xp6(2),t.Q6J("href",i.informationDesk.website,t.LSH),t.xp6(1),t.hij(" ",t.lcZ(18,11,"trek.details.informationDesk.website")," "),t.xp6(3),t.Q6J("href","mailto:"+i.informationDesk.email,t.LSH),t.xp6(3),t.Q6J("href","tel:"+i.informationDesk.phone,t.LSH),t.xp6(1),t.Oqu(i.informationDesk.phone))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.wd,r.W2,r.PM,_.O5,r.Xz,r.FN],pipes:[T.X$],styles:[""]}),s})();var $=m(4898),V=m(8306),B=m(9300),q=m(1884);function W(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-img",9),t.NdJ("ionError",function(){t.CHM(e);const o=t.oxw().index;return t.oxw(2).onImgPracticeSrcError(o)}),t.qZA()}if(2&s){const e=t.oxw(),i=e.$implicit,o=e.index,c=t.oxw(2);t.Udp("background-color",i.imgTypePoi.color?i.imgTypePoi.color:"transparent"),t.Q6J("src",c.imgPractices[o].src)}}function R(s,a){if(1&s&&(t.TgZ(0,"ion-item"),t._UZ(1,"ion-radio",6),t.YNc(2,W,1,3,"ion-img",7),t.TgZ(3,"ion-label",8),t._uU(4),t.qZA()()),2&s){const e=a.$implicit,i=a.index,o=t.oxw(2);t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.Q6J("ngIf",e.imgTypePoi.src&&!o.imgPractices[i].hideImgPracticeSrc),t.xp6(2),t.Oqu(e.name)}}function X(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-list")(1,"ion-radio-group",4),t.NdJ("ionChange",function(o){return t.CHM(e),t.oxw().selectedPoiChange(o)}),t.YNc(2,R,5,3,"ion-item",5),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("value",e.selectedPoiId),t.xp6(1),t.Q6J("ngForOf",e.radioPois)}}let K=(()=>{class s{constructor(e,i){this.modalController=e,this.offlineTreks=i,this.baseUrl=p.N.onlineBaseUrl,this.imgPractices=[]}ngOnInit(){return(0,f.mG)(this,void 0,void 0,function*(){this.selectedPoiId=this.radioPois[0].id;for(const e of this.radioPois)this.imgPractices.push(Object.assign(Object.assign({},e.imgTypePoi),{src:yield this.offlineTreks.getTrekImageSrc({},{url:e.imgTypePoi.src}),firstTryToLoadFromOnline:!0,hideImgPracticeSrc:!1}))})}cancel(){this.modalController.dismiss()}select(){this.modalController.dismiss({selectedPoiId:this.selectedPoiId})}selectedPoiChange(e){this.selectedPoiId=e.detail.value}onImgPracticeSrcError(e){this.imgPractices[e].src&&this.imgPractices[e].firstTryToLoadFromOnline?(this.imgPractices[e].firstTryToLoadFromOnline=!1,this.imgPractices[e].src=`${this.baseUrl}${this.imgPractices[e].src}`):this.imgPractices[e].hideImgPracticeSrc=!0}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.IN),t.Y36(P.U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-select-poi"]],inputs:{themePois:"themePois",radioPois:"radioPois"},decls:16,vars:10,consts:[["color","primary"],[4,"ngIf"],["slot","end"],["color","primary","fill","clear",3,"click"],[3,"value","ionChange"],[4,"ngFor","ngForOf"],["slot","start",3,"value"],["style","width: 24px; height: 24px; margin-right: 12px",3,"background-color","src","ionError",4,"ngIf"],[1,"ion-text-wrap"],[2,"width","24px","height","24px","margin-right","12px",3,"src","ionError"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3),t.ALo(4,"translate"),t.qZA()()(),t.TgZ(5,"ion-content"),t.YNc(6,X,3,2,"ion-list",1),t.qZA(),t.TgZ(7,"ion-footer")(8,"ion-toolbar")(9,"ion-buttons",2)(10,"ion-button",3),t.NdJ("click",function(){return i.cancel()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"ion-button",3),t.NdJ("click",function(){return i.select()}),t._uU(14),t.ALo(15,"translate"),t.qZA()()()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,i.themePois)," "),t.xp6(3),t.Q6J("ngIf",i.imgPractices.length===i.radioPois.length),t.xp6(5),t.hij(" ",t.lcZ(12,6,"mapTrek.poisAlert.cancelButton")," "),t.xp6(3),t.hij(" ",t.lcZ(15,8,"mapTrek.poisAlert.confirmButton")," "))},directives:[r.Gu,r.sr,r.wd,r.W2,_.O5,r.q_,r.se,r.QI,_.sg,r.Ie,r.B7,r.U5,r.Xz,r.Q$,r.fr,r.Sm,r.YG],pipes:[T.X$],styles:[""]}),s})();var tt=m(3036),D=m(9898),v=m.n(D);function et(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-item",2)(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-checkbox",3),t.NdJ("ionChange",function(o){return t.CHM(e),t.oxw().layerVisibilityChange(o)}),t.qZA()()}if(2&s){const e=a.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(1),t.Q6J("checked",e.visibility)("value",e.layersName)}}let it=(()=>{class s{constructor(e){this.navParams=e}ngOnInit(){this.changeLayerVisibility=this.navParams.get("changeLayerVisibility"),this.layers=this.navParams.get("layers")}layerVisibilityChange(e){this.changeLayerVisibility(e.detail.checked,e.detail.value)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.X1))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-layers-visibility"]],decls:2,vars:1,consts:[["lines","inset"],["class","no-lines",4,"ngFor","ngForOf"],[1,"no-lines"],["slot","end",3,"checked","value","ionChange"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-list",0),t.YNc(1,et,4,3,"ion-item",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.layers))},directives:[r.q_,_.sg,r.Ie,r.Q$,r.nz,r.w],styles:[".no-lines[_ngcontent-%COMP%]{--inner-border-width: 0px}"]}),s})();var ot=m(7489),N=m(1345);const st=["mapViz"];let rt=(()=>{class s{constructor(e,i,o,c,l,n,u){this.settings=e,this.geolocate=i,this.popoverController=o,this.translate=c,this.alertController=l,this.modalController=n,this.offlineTreks=u,this.navigateModeIsActive=!1,this.currentTrek=null,this.presentPoiDetails=new t.vpe,this.presentInformationDeskDetails=new t.vpe,this.navigateToChildren=new t.vpe,this.flyToUserLocation=(0,ot.throttle)(this.flyToUserLocation,3e3)}ngOnChanges(e){const i=e.currentTrek,o=e.currentPois,c=e.touristicCategoriesWithFeatures;this.currentTrek&&this.currentPois&&this.touristicCategoriesWithFeatures&&(i&&!i.previousValue||o&&!o.previousValue||c&&!c.previousValue)&&this.createMap()}ngOnDestroy(){this.navigate$&&this.navigate$.unsubscribe(),this.geolocate.stopOnMapTracking(),this.currentPositionSubscription&&this.currentPositionSubscription.unsubscribe(),this.currentHeadingSubscription&&this.currentHeadingSubscription.unsubscribe(),this.loadImagesSubscription&&this.loadImagesSubscription.unsubscribe()}createMap(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.mapConfig&&this.mapConfig.style){this.map=new D.Map(Object.assign(Object.assign({},this.mapConfig),{container:"map-trek"})),this.map.fitBounds(this.mapConfig.trekBounds,p.N.map.TrekfitBoundsOptions),this.map.addControl(new(v().NavigationControl)({showCompass:!1}),"top-left"),this.map.addControl(new(v().ScaleControl)({unit:"metric"})),this.map.addControl(new(v().AttributionControl)({compact:!1,customAttribution:p.N.map.attributionText})),p.N.map.enableRotation||(this.map.dragRotate.disable(),this.map.touchZoomRotate.disableRotation()),this.map.on("click","pois-icon",i=>{if(i.features&&i.features.length>0){const o=Object.assign({},i.features[0]);o.properties&&o.properties.pictures&&(o.properties.pictures=JSON.parse(o.properties.pictures)),this.presentPoiDetails.emit(o)}}),this.map.on("click","information-desk-icon",i=>{const o=this.map.queryRenderedFeatures(i.point,{layers:["children-treks-circle"]});if(i.features&&i.features.length>0&&(!o||!(o.length>0))&&i.features[0]&&i.features[0].properties&&i.features[0].properties.id&&this.currentTrek){const c=this.currentTrek.properties.information_desks.find(l=>l.id===i.features[0].properties.id);this.presentInformationDeskDetails.emit(c)}}),this.map.on("click","touristics-content-icon",i=>{if(i.features&&i.features.length>0){const o=Object.assign({},i.features[0]);o.properties&&o.properties.pictures&&(o.properties.pictures=JSON.parse(o.properties.pictures)),this.presentPoiDetails.emit(o)}}),this.map.on("click","children-treks-circle",i=>{if(i.features&&i.features.length>0){const o=Object.assign({},i.features[0]);o.properties&&o.properties.id&&this.navigateToChildren.emit(o.properties.id)}}),this.handleClustersInteraction();const e=V.y.create(i=>{const o=[];this.poisType=this.dataSettings.find(n=>"poi_types"===n.id),this.poisType&&this.poisType.values.forEach(n=>{n.pictogram&&o.push({id:`pois${n.id}`,pictogram:n.pictogram})});const c=this.dataSettings.find(n=>"information_desk_types"===n.id);c&&c.values.forEach(n=>{n.pictogram&&o.push({id:`informationDesk${n.id}`,pictogram:n.pictogram})});const l=this.dataSettings.find(n=>"touristiccontent_categories"===n.id);l&&l.values.forEach(n=>{n.pictogram&&o.push({id:`touristicContent${n.id}`,pictogram:n.pictogram})}),o.push({id:"arrival",pictogram:"./assets/map/icons/departure.png",fromAssets:!0}),o.push({id:"departure",pictogram:"./assets/map/icons/arrival.png",fromAssets:!0}),o.push({id:"departureArrival",pictogram:"./assets/map/icons/departureArrival.png",fromAssets:!0}),o.push({id:"parking",pictogram:"./assets/map/icons/parking.png",fromAssets:!0}),o.push({id:"arrow",pictogram:"./assets/map/icons/arrow.png",fromAssets:!0}),o.forEach((n,u)=>(0,f.mG)(this,void 0,void 0,function*(){this.map.loadImage(n.fromAssets?n.pictogram:yield this.offlineTreks.getTrekImageSrc({},{url:n.pictogram}),(y,d)=>{y?this.map.loadImage(`${this.commonSrc}${n.pictogram}`,(h,g)=>{h||this.map.addImage(n.id.toString(),g),u+1===o.length&&i.complete()}):(this.map.addImage(n.id.toString(),d),u+1===o.length&&i.complete())})}))});this.currentPositionSubscription=this.geolocate.currentPosition$.pipe((0,B.h)(i=>null!==i),(0,q.x)()).subscribe(i=>(0,f.mG)(this,void 0,void 0,function*(){const o=[i.longitude,i.latitude];if(this.markerPosition)this.markerPosition.setLngLat(o);else{const c=document.createElement("div"),l=yield this.geolocate.checkIfCanGetCurrentHeading();c.className=l?"pulse-and-view":"pulse",this.markerPosition=new(v().Marker)({element:c}).setLngLat(o),this.markerPosition&&this.markerPosition.addTo(this.map)}})),this.currentHeadingSubscription=this.geolocate.currentHeading$.subscribe(i=>{this.markerPosition&&i&&this.markerPosition.setRotation(i)}),this.loadImagesSubscription=e.subscribe({complete:()=>(0,f.mG)(this,void 0,void 0,function*(){this.mapViz.nativeElement.mapInstance=this.map,yield this.initializeSources(),this.initializeLayers(),this.updateSources(),(yield this.geolocate.shouldShowInAppDisclosure())&&(yield this.presentInAppDisclosure()),this.geolocate.startOnMapTracking()})})}})}initializeSources(){return(0,f.mG)(this,void 0,void 0,function*(){const e={type:"FeatureCollection",features:[]};this.map.addSource("zone",{type:"geojson",data:yield this.settings.getZoneFromStorage()}),this.map.addSource("trek",{type:"geojson",data:e}),this.map.addSource("departure-arrival",{type:"geojson",data:e}),this.map.addSource("pois",{type:"geojson",data:e,maxzoom:this.mapConfig.maxZoom?this.mapConfig.maxZoom+1:18,cluster:!0,clusterRadius:50}),this.map.addSource("touristics-content",{type:"geojson",data:e,maxzoom:this.mapConfig.maxZoom?this.mapConfig.maxZoom+1:18,cluster:!0,clusterRadius:50}),this.map.addSource("information-desk",{type:"geojson",data:e}),this.map.addSource("parking",{type:"geojson",data:e}),this.map.addSource("points-reference",{type:"geojson",data:e}),this.map.addSource("children-treks",{type:"geojson",data:e})})}initializeLayers(){const e=this.currentTrek&&this.currentTrek.properties.children&&this.currentTrek.properties.children.features.length>0?"none":"visible";this.map.addLayer(Object.assign({id:"zone",source:"zone"},p.N.map.zoneLayerProperties)),this.map.addLayer(Object.assign({id:"zone-outline",source:"zone"},p.N.map.zoneOutlineLayerProperties)),this.map.addLayer(Object.assign({id:"trek-line",type:"line",source:"trek"},p.N.map.trekLineLayerProperties)),this.map.addLayer({id:"arrow-layer",type:"symbol",source:"trek",layout:Object.assign({"icon-image":"arrow"},p.N.map.trekArrowLayerProperties.layout)}),this.map.addLayer(Object.assign({id:"points-reference-circle",type:"circle",source:"points-reference"},p.N.map.pointReferenceLayersProperties.circle)),this.map.addLayer(Object.assign({id:"points-reference-text",type:"symbol",source:"points-reference"},p.N.map.pointReferenceLayersProperties.text)),this.map.addLayer({id:"pois-icon",type:"symbol",source:"pois",filter:["!",["has","point_count"]],layout:{"icon-image":["concat","pois",["get","type"]],"icon-size":p.N.map.poisLayersProperties.iconSize,"icon-allow-overlap":!0,visibility:"visible"===e?p.N.map.poisLayersProperties.visibility:e}}),this.map.addLayer({id:"clusters-circle-pois",type:"circle",source:"pois",filter:["has","point_count"],paint:p.N.map.clusterPaint,layout:{visibility:"visible"===e?p.N.map.poisLayersProperties.visibility:e}}),this.map.addLayer({id:"cluster-text-count-pois",type:"symbol",source:"pois",filter:["has","point_count"],paint:p.N.map.clusterTextPaint,layout:{"text-field":"{point_count_abbreviated}","text-font":["Roboto Regular"],"text-size":18,"text-offset":[0,.1],"text-ignore-placement":!0,"text-allow-overlap":!0,visibility:"visible"===e?p.N.map.poisLayersProperties.visibility:e}}),this.touristicsContentCategory=this.dataSettings.find(o=>"touristiccontent_categories"===o.id);const i=[];this.touristicsContentCategory&&(i.push("match"),i.push(["get","category"]),this.touristicsContentCategory.values.forEach(o=>{i.push(o.id),i.push(o.color)}),i.push(p.N.map.clusterPaint["circle-color"])),this.map.addLayer({id:"touristics-content-circle",type:"circle",source:"touristics-content",filter:["!",["has","point_count"]],paint:Object.assign(Object.assign({},p.N.map.touristicContentLayersProperties.circle.paint),{"circle-color":this.touristicsContentCategory?i:"#000000"}),layout:{visibility:"visible"===e?p.N.map.touristicContentLayersProperties.visibility:e}}),this.map.addLayer({id:"touristics-content-icon",type:"symbol",source:"touristics-content",filter:["!",["has","point_count"]],layout:Object.assign({visibility:"visible"===e?p.N.map.touristicContentLayersProperties.visibility:e},p.N.map.touristicContentLayersProperties.icon.layout)}),this.map.addLayer({id:"clusters-circle-touristics-content",type:"circle",source:"touristics-content",filter:["has","point_count"],paint:p.N.map.clusterPaint,layout:{visibility:"visible"===e?p.N.map.touristicContentLayersProperties.visibility:e}}),this.map.addLayer({id:"cluster-text-count-touristics-content",type:"symbol",source:"touristics-content",filter:["has","point_count"],paint:p.N.map.clusterTextPaint,layout:{"text-field":"{point_count_abbreviated}","text-font":["Roboto Regular"],"text-size":18,"text-offset":[0,.1],"text-allow-overlap":!0,"text-ignore-placement":!0,visibility:"visible"===e?p.N.map.touristicContentLayersProperties.visibility:e}}),this.map.addLayer({id:"information-desk-icon",type:"symbol",source:"information-desk",layout:{"icon-image":["concat","informationDesk",["get","id",["object",["get","type"]]]],"icon-size":p.N.map.informationIconSize,"icon-allow-overlap":!0}}),this.map.addLayer({id:"parking-icon",type:"symbol",source:"parking",layout:{"icon-image":"parking","icon-size":p.N.map.parkingIconSize,"icon-allow-overlap":!0}}),this.map.addLayer({id:"departure-arrival-icon",type:"symbol",source:"departure-arrival",layout:{"icon-image":["case",["==",["get","type"],"departure"],"departure",["==",["get","type"],"arrival"],"arrival","departureArrival"],"icon-size":p.N.map.departureArrivalIconSize}}),this.map.addLayer({id:"children-treks-circle",type:"circle",source:"children-treks",paint:p.N.map.stagePaint}),this.map.addLayer({id:"children-treks-index",type:"symbol",source:"children-treks",paint:{"text-color":"#000000"},layout:{"text-field":"{index}","text-font":["Roboto Regular"],"text-size":18,"text-offset":[0,.1],"text-allow-overlap":!0,"text-ignore-placement":!0}})}updateSources(){if(this.map&&this.currentTrek){const e=this.map.getSource("trek");e&&e.setData(this.currentTrek);const i=this.map.getSource("departure-arrival");if(i&&(!this.currentTrek.properties.children||!this.currentTrek.properties.children.features||!(this.currentTrek.properties.children.features.length>0))){const d=this.currentTrek.geometry.coordinates[0],h=this.currentTrek.geometry.coordinates.slice(-1)[0],g={type:"FeatureCollection",features:[]};d[0]===h[0]&&d[1]===h[1]?g.features.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:{type:"departure-arrival"}}):(g.features.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:{type:"departure"}}),g.features.push({type:"Feature",geometry:{type:"Point",coordinates:h},properties:{type:"arrival"}})),i.setData(g)}const o=this.map.getSource("pois");o&&o.setData(this.currentPois);const c=this.map.getSource("touristics-content");if(c){let d=[];this.touristicCategoriesWithFeatures.forEach(g=>{d=d.concat(g.features)}),c.setData({type:"FeatureCollection",features:d})}const l=this.map.getSource("parking");if(l&&this.currentTrek.properties.parking_location){const d={type:"FeatureCollection",features:[]};d.features.push({type:"Feature",geometry:{type:"Point",coordinates:this.currentTrek.properties.parking_location},properties:{}}),l.setData(d)}const n=this.map.getSource("information-desk");if(n&&this.currentTrek.properties.information_desks&&this.currentTrek.properties.information_desks.length>0){const d={type:"FeatureCollection",features:[]};this.currentTrek.properties.information_desks.forEach(h=>{h.longitude&&h.latitude&&d.features.push({type:"Feature",geometry:{type:"Point",coordinates:[h.longitude,h.latitude]},properties:{type:h.type,id:h.id}})}),n.setData(d)}const u=this.map.getSource("points-reference");if(u&&this.currentTrek.properties.points_reference&&this.currentTrek.properties.points_reference.length>0){const d={type:"FeatureCollection",features:[]};this.currentTrek.properties.points_reference.forEach((h,g)=>{d.features.push({type:"Feature",geometry:{type:"Point",coordinates:[h[0],h[1]]},properties:{index:g+1}})}),u.setData(d)}const y=this.map.getSource("children-treks");if(y&&this.currentTrek.properties.children&&this.currentTrek.properties.children.features.length>0){const d=Object.assign({},this.currentTrek.properties.children);d.features.forEach((h,g)=>{h.properties&&(h.properties.index=g+1)}),y.setData(d)}}}flyToUserLocation(){return(0,f.mG)(this,void 0,void 0,function*(){const e=yield this.geolocate.getCurrentPosition();if(e){const i=[e.longitude,e.latitude];if(this.markerPosition)this.markerPosition.setLngLat(i);else{const o=document.createElement("div"),c=yield this.geolocate.checkIfCanGetCurrentHeading();o.className=c?"pulse-and-view":"pulse",this.markerPosition=new(v().Marker)({element:o}).setLngLat(i),this.markerPosition&&this.markerPosition.addTo(this.map)}this.map.flyTo({center:i,animate:!1,zoom:p.N.trekZoom.zoom})}else{const i=yield this.translate.get("geolocate.error").toPromise();yield(yield this.alertController.create({header:i.header,subHeader:i.subHeader,message:i.message,buttons:[i.confirmButton]})).present()}})}FitToTrekBounds(){this.map.fitBounds(this.mapConfig.trekBounds,p.N.map.TrekfitBoundsOptions)}showLayersVisibility(e){return(0,f.mG)(this,void 0,void 0,function*(){const i=[{name:yield this.translate.get("trek.details.poi.name").toPromise(),visibility:"visible"===this.map.getLayoutProperty("pois-icon","visibility"),layersName:["pois-icon","cluster-text-count-pois","clusters-circle-pois"].toString()},{name:yield this.translate.get("trek.details.touristicContent.name").toPromise(),visibility:"visible"===this.map.getLayoutProperty("touristics-content-circle","visibility"),layersName:["touristics-content-circle","touristics-content-icon","cluster-text-count-touristics-content","clusters-circle-touristics-content"].toString()}];return yield(yield this.popoverController.create({component:it,event:e,translucent:!0,componentProps:{changeLayerVisibility:(c,l)=>this.changeLayerVisibility(c,l),layers:i}})).present()})}changeLayerVisibility(e,i){i.split(",").forEach(o=>this.map.setLayoutProperty(o,"visibility",e?"visible":"none"))}handleClustersInteraction(){[{id:"pois",translateId:"trek.details.poi.name"},{id:"touristics-content",translateId:"trek.details.touristicContent.name"}].forEach(e=>{this.map.on("click",`clusters-circle-${e.id}`,i=>{const o=this.map.queryRenderedFeatures(i.point,{layers:[`clusters-circle-${e.id}`]}),c=o[0].properties;if(c){const l=c.cluster_id;this.map.getZoom()===this.mapConfig.maxZoom?this.map.getSource(e.id).getClusterLeaves(c.cluster_id,1/0,0,(n,u)=>{if(n)throw n;this.presentConfirmFeatures(u,e)}):this.map.getSource(e.id).getClusterExpansionZoom(l,(n,u)=>{if(n)return;const y=o[0].geometry.coordinates;this.map.easeTo({center:[y[0],y[1]],zoom:u})})}})})}presentConfirmFeatures(e,i){return(0,f.mG)(this,void 0,void 0,function*(){const o=[];e.forEach(n=>{let u;this.poisType&&n.properties.type&&"pois"===i.id?u=this.poisType.values.find(d=>d.id===n.properties.type):this.touristicsContentCategory&&n.properties.category&&"touristics-content"===i.id&&(u=this.touristicsContentCategory.values.find(d=>d.id===n.properties.category)),o.push({id:n.properties.id,name:n.properties.name,imgTypePoi:{src:u&&u.pictogram?u.pictogram:void 0,color:u&&u.color?u.color:void 0}})});const c=yield this.modalController.create({component:K,componentProps:{radioPois:o,themePois:i.translateId},cssClass:"full-size"});yield c.present();const{data:l}=yield c.onDidDismiss();if(l&&l.selectedPoiId){const n=e.find(u=>u.properties.id===l.selectedPoiId);n&&this.presentPoiDetails.emit(n)}})}handleNavigateMode(){return(0,f.mG)(this,void 0,void 0,function*(){if(this.navigateModeIsActive=!this.navigateModeIsActive,this.navigateModeIsActive){const e=yield this.geolocate.getCurrentPosition();if(e)this.map.flyTo({center:[e.longitude,e.latitude],animate:!1,zoom:p.N.trekZoom.maxZoom}),this.navigate$=this.geolocate.currentPosition$.subscribe(i=>(0,f.mG)(this,void 0,void 0,function*(){i&&this.map.panTo(i)})),this.map.dragPan.disable();else{const i=yield this.translate.get("geolocate.error").toPromise();yield(yield this.alertController.create({header:i.header,subHeader:i.subHeader,message:i.message,buttons:[i.confirmButton]})).present()}}else this.navigate$&&this.navigate$.unsubscribe(),this.map.dragPan.enable()})}presentInAppDisclosure(){return(0,f.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:tt.e,componentProps:{},cssClass:"full-size"});yield e.present(),yield e.onDidDismiss()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(b.g),t.Y36(N.x),t.Y36(r.Dh),t.Y36(T.sK),t.Y36(r.Br),t.Y36(r.IN),t.Y36(P.U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-map-trek-viz"]],viewQuery:function(e,i){if(1&e&&t.Gf(st,5),2&e){let o;t.iGM(o=t.CRH())&&(i.mapViz=o.first)}},inputs:{currentTrek:"currentTrek",currentPois:"currentPois",touristicCategoriesWithFeatures:"touristicCategoriesWithFeatures",dataSettings:"dataSettings",mapConfig:"mapConfig",commonSrc:"commonSrc",offline:"offline"},outputs:{presentPoiDetails:"presentPoiDetails",presentInformationDeskDetails:"presentInformationDeskDetails",navigateToChildren:"navigateToChildren"},features:[t.TTD],decls:11,vars:1,consts:[["id","map-trek",1,"map-viz"],["mapViz",""],[1,"options-button-container"],["shape","round","size","small","color","light",3,"click"],["name","navigate",3,"color"],["color","dark","name","locate"],["color","dark","name","contract"],["mode","ios","color","dark","name","apps"]],template:function(e,i){1&e&&(t._UZ(0,"div",0,1),t.TgZ(2,"div",2)(3,"ion-button",3),t.NdJ("click",function(){return i.handleNavigateMode()}),t._UZ(4,"ion-icon",4),t.qZA(),t.TgZ(5,"ion-button",3),t.NdJ("click",function(){return i.flyToUserLocation()}),t._UZ(6,"ion-icon",5),t.qZA(),t.TgZ(7,"ion-button",3),t.NdJ("click",function(){return i.FitToTrekBounds()}),t._UZ(8,"ion-icon",6),t.qZA(),t.TgZ(9,"ion-button",3),t.NdJ("click",function(c){return i.showLayersVisibility(c)}),t._UZ(10,"ion-icon",7),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("color",i.navigateModeIsActive?"tertiary":"dark"))},directives:[r.YG,r.gu],styles:[".options-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;right:24px;top:24px;z-index:5}"]}),s})();var Z=m(2615),nt=m(476);const k=(0,m(7423).fo)("LocalNotifications",{web:()=>m.e(7434).then(m.bind(m,7434)).then(s=>new s.LocalNotificationsWeb)});function ct(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeNotificationsMode()}),t._UZ(1,"ion-icon",2),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&s&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"mapTrek.enableNotification"),"\n"))}function pt(s,a){1&s&&t._UZ(0,"ion-icon",4)}function lt(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"ion-button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeNotificationsMode()}),t.YNc(1,pt,1,0,"ion-icon",3),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.notificationsModeIsActive),t.xp6(1),t.hij(" ",t.lcZ(3,2,"mapTrek.disableNotification"),"\n")}}let ut=(()=>{class s{constructor(e,i,o,c){this.platform=e,this.alertController=i,this.geolocate=o,this.translate=c,this.currentPoisToNotify=[],this.notificationsModeIsActive=!1,this.presentPoiDetails=new t.vpe}ngOnInit(){k.addListener("localNotificationActionPerformed",e=>{const i=this.currentPois.features.find(o=>o.properties.id===e.notification.id);this.presentPoiDetails.emit(i)})}ngOnChanges(e){const i=e.currentPois;i.currentValue&&!i.previousValue&&this.currentPois&&Array.isArray(this.currentPois.features)&&(this.currentPoisToNotify=this.currentPois.features.map(o=>({id:o.properties.id,name:o.properties.name,coordinates:o.geometry.coordinates})))}ngOnDestroy(){k.removeAllListeners(),this.currentPosition$&&this.disableGeolocationNotification()}changeNotificationsMode(){return(0,f.mG)(this,void 0,void 0,function*(){this.notificationsModeIsActive?(this.notificationsModeIsActive=!1,this.disableGeolocationNotification()):(this.platform.is("ios")||this.platform.is("android"))&&("granted"===(yield k.checkPermissions()).display?(this.notificationsModeIsActive=!0,this.enableGeolocationNotification()):yield k.requestPermissions())})}enableGeolocationNotification(){this.currentPosition$=this.geolocate.currentPosition$.subscribe(e=>this.checkToNotify([e.longitude,e.latitude]))}disableGeolocationNotification(){this.currentPosition$.unsubscribe()}checkToNotify(e){if(e&&this.currentPoisToNotify&&this.currentPoisToNotify.length>0){const i=p.N.metersToNotify/1e3,o={units:"kilometers"},c=(0,Z.xm)(e),l=this.currentPoisToNotify.findIndex(n=>(0,nt.Z)(c,(0,Z.xm)(n.coordinates),o)<=i);-1!==l&&(this.platform.is("ios")||this.platform.is("android"))&&this.translate.get("geolocate.poiNearBy").subscribe(n=>{k.schedule({notifications:[{id:this.currentPoisToNotify[l].id,title:n,body:this.currentPoisToNotify[l].name,extra:{id:this.currentPoisToNotify[l].id}}]}),this.currentPoisToNotify.splice(l,1)})}}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.t4),t.Y36(r.Br),t.Y36(N.x),t.Y36(T.sK))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-geolocate-notifications"]],inputs:{currentPois:"currentPois",trekName:"trekName"},outputs:{presentPoiDetails:"presentPoiDetails"},features:[t.TTD],decls:2,vars:2,consts:[["expand","full",3,"click",4,"ngIf"],["expand","full",3,"click"],["color","white","slot","start","name","notifications"],["color","white","slot","start","name","notifications-off",4,"ngIf"],["color","white","slot","start","name","notifications-off"]],template:function(e,i){1&e&&(t.YNc(0,ct,4,3,"ion-button",0),t.YNc(1,lt,4,4,"ion-button",0)),2&e&&(t.Q6J("ngIf",!i.notificationsModeIsActive),t.xp6(1),t.Q6J("ngIf",i.notificationsModeIsActive))},directives:[_.O5,r.YG,r.gu],pipes:[T.X$],styles:[""]}),s})();function mt(s,a){if(1&s&&(t.TgZ(0,"div",6)(1,"ion-text"),t._uU(2),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.currentTrek.properties.name)}}function dt(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"app-connect-error",7),t.NdJ("retry",function(){return t.CHM(e),t.oxw().refresh()}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()}2&s&&t.Q6J("title",t.lcZ(1,3,"error.title"))("content",t.lcZ(2,5,"error.TrekMap"))("buttonText",t.lcZ(3,7,"error.buttonText"))}function ht(s,a){if(1&s){const e=t.EpF();t.TgZ(0,"app-map-trek-viz",11),t.NdJ("presentPoiDetails",function(o){return t.CHM(e),t.oxw(2).presentPoiDetails(o)})("presentInformationDeskDetails",function(o){return t.CHM(e),t.oxw(2).presentInformationDeskDetails(o)})("navigateToChildren",function(o){return t.CHM(e),t.oxw(2).navigateToChildren(o)}),t.qZA()}if(2&s){const e=t.oxw(2);t.Q6J("currentTrek",e.currentTrek)("currentPois",e.currentPois)("touristicCategoriesWithFeatures",e.touristicCategoriesWithFeatures)("mapConfig",e.mapConfig)("dataSettings",e.settings.data$.value)("commonSrc",e.commonSrc)("offline",e.offline)}}function ft(s,a){if(1&s){const e=t.EpF();t.YNc(0,ht,1,7,"app-map-trek-viz",8),t.TgZ(1,"div",9)(2,"app-geolocate-notifications",10),t.NdJ("presentPoiDetails",function(o){return t.CHM(e),t.oxw().presentPoiDetails(o)}),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("ngIf",e.canDisplayMap),t.xp6(2),t.Q6J("trekName",e.currentTrek?e.currentTrek.properties.name:"")("currentPois",e.currentPois)}}const gt=[{path:"",component:(()=>{class s{constructor(e,i,o,c,l,n){this.modalController=e,this.route=i,this.router=o,this.settings=c,this.onlineTreks=l,this.offlineTreks=n,this.currentTrek=null,this.trekUrl="",this.connectionError=!1,this.offline=!1,this.canDisplayMap=!1}ngOnInit(){this.loadTrek()}loadTrek(){const e=!!this.route.snapshot.data.offline,i=!!this.route.snapshot.data.isStage,o=+this.route.snapshot.paramMap.get("trekId"),c=+this.route.snapshot.paramMap.get("stageId"),l=i?c:o,n=i?o:void 0,u=e?this.offlineTreks:this.onlineTreks;(0,L.D)([u.getTrekById(l,n),u.getPoisForTrekById(l,n),u.getTouristicContentsForTrekById(l,n),u.getTouristicEventsForTrekById(l,n),i&&n?u.getTrekById(n):(0,M.of)(null)]).pipe((0,A.P)()).subscribe(([y,d,h,g,_t])=>(0,f.mG)(this,void 0,void 0,function*(){this.connectionError=!1;const Tt=yield u.getMapConfigForTrekById(i&&n?_t:y,e),vt=yield u.getCommonImgSrc(),kt=this.settings.getHydratedTrek(y,vt),Pt=this.settings.getTouristicCategoriesWithFeatures(h);this.offline=e,this.currentTrek=kt,this.currentPois=d,this.touristicCategoriesWithFeatures=Pt,this.mapConfig=Tt,this.treksTool=u,this.commonSrc=yield u.getCommonImgSrc(),this.trekUrl=u.getTrekDetailsUrl(this.currentTrek.properties.id)}),()=>{this.connectionError=!0})}ionViewWillEnter(){this.canDisplayMap=!0}presentPoiDetails(e){return(0,f.mG)(this,void 0,void 0,function*(){return this.modalPoiDetails&&(yield this.modalPoiDetails.dismiss()),this.modalPoiDetails=yield this.modalController.create({component:G,componentProps:{poi:e,offline:this.offline,commonSrc:this.commonSrc},cssClass:"full-size"}),this.modalPoiDetails.onDidDismiss().then(()=>{this.modalPoiDetails=null}),yield this.modalPoiDetails.present()})}presentInformationDeskDetails(e){return(0,f.mG)(this,void 0,void 0,function*(){return yield(yield this.modalController.create({component:H,componentProps:{informationDesk:e}})).present()})}refresh(){this.loadTrek()}navigateToChildren(e){this.currentTrek&&this.router.navigate([this.treksTool.getTrekDetailsUrl(e,this.currentTrek.properties.id)])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(r.IN),t.Y36(C.gz),t.Y36(C.F0),t.Y36(b.g),t.Y36(I.a),t.Y36(P.U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-trek-map"]],decls:10,vars:4,consts:[["color","primary"],["slot","start"],[3,"defaultHref"],["class","custom-title",4,"ngIf"],["icon","wifi",3,"title","content","buttonText","retry",4,"ngIf","ngIfElse"],["trekMap",""],[1,"custom-title"],["icon","wifi",3,"title","content","buttonText","retry"],[3,"currentTrek","currentPois","touristicCategoriesWithFeatures","mapConfig","dataSettings","commonSrc","offline","presentPoiDetails","presentInformationDeskDetails","navigateToChildren",4,"ngIf"],[1,"bottom-container"],[3,"trekName","currentPois","presentPoiDetails"],[3,"currentTrek","currentPois","touristicCategoriesWithFeatures","mapConfig","dataSettings","commonSrc","offline","presentPoiDetails","presentInformationDeskDetails","navigateToChildren"]],template:function(e,i){if(1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.YNc(4,mt,3,1,"div",3),t.qZA()(),t.TgZ(5,"ion-content"),t.ynx(6),t.YNc(7,dt,4,9,"app-connect-error",4),t.BQk(),t.YNc(8,ft,3,3,"ng-template",null,5,t.W1O),t.qZA()),2&e){const o=t.MAs(9);t.xp6(3),t.Q6J("defaultHref",i.trekUrl),t.xp6(1),t.Q6J("ngIf",i.currentTrek),t.xp6(3),t.Q6J("ngIf",i.connectionError)("ngIfElse",o)}},directives:[r.Gu,r.sr,r.Sm,r.oU,r.cs,_.O5,r.yW,r.W2,$.t,rt,ut],pipes:[T.X$],styles:[".bottom-container[_ngcontent-%COMP%]{z-index:8;position:absolute;bottom:0;padding:0 7px 5px;width:100%}ion-header[_ngcontent-%COMP%]   .custom-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;letter-spacing:.0125em}"]}),s})()}];let yt=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[_.ez,r.Pc,C.Bz.forChild(gt),S.e,T.aw.forChild()]]}),s})()}}]);