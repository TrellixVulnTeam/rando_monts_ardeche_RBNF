{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { forkJoin, of } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { Share } from '@capacitor/share';\nimport { environment } from '@env/environment';\nimport { ProgressComponent } from '@app/components/progress/progress.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/services/online-treks/online-treks.service\";\nimport * as i2 from \"@app/services/offline-treks/offline-treks.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@ngx-translate/core\";\nimport * as i6 from \"@app/services/settings/settings.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@app/components/connect-error/connect-error.component\";\nimport * as i9 from \"@app/components/trek-card/trek-card.component\";\nimport * as i10 from \"@app/components/poi/poi.component\";\nimport * as i11 from \"@app/components/collapsible-list/collapsible-list.component\";\nimport * as i12 from \"../../shared/shared-treks.module\";\n\nfunction TrekDetailsPage_div_4_ion_text_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(2, 2, \"trek.details.stage\"), \" \", ctx_r6.stageIndex + 1, \" -\");\n  }\n}\n\nfunction TrekDetailsPage_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtemplate(1, TrekDetailsPage_div_4_ion_text_1_Template, 3, 4, \"ion-text\", 9);\n    i0.ɵɵelementStart(2, \"ion-text\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isStage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.currentTrek.properties.name, \"\");\n  }\n}\n\nfunction TrekDetailsPage_ion_buttons_6_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function TrekDetailsPage_ion_buttons_6_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.presentDownloadConfirm();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelement(3, \"ion-icon\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"trek.offline\"), \" \");\n  }\n}\n\nfunction TrekDetailsPage_ion_buttons_6_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function TrekDetailsPage_ion_buttons_6_ion_button_2_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.clickDeleteConfirm($event);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelement(3, \"ion-icon\", 16);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"trek.offline\"), \" \");\n  }\n}\n\nfunction TrekDetailsPage_ion_buttons_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-buttons\", 10);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ion_buttons_6_ion_button_1_Template, 4, 3, \"ion-button\", 11);\n    i0.ɵɵtemplate(2, TrekDetailsPage_ion_buttons_6_ion_button_2_Template, 4, 3, \"ion-button\", 11);\n    i0.ɵɵelementStart(3, \"ion-button\", 12);\n    i0.ɵɵtext(4, \" PDF \");\n    i0.ɵɵelement(5, \"ion-icon\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"ion-button\", 12);\n    i0.ɵɵtext(7, \" GPX \");\n    i0.ɵɵelement(8, \"ion-icon\", 13);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.offline && !ctx_r1.isAvailableOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isAvailableOffline && !ctx_r1.isStage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"href\", ctx_r1.apiUrl + \"/\" + ctx_r1.currentTrek.properties.id + \"/\" + ctx_r1.currentTrek.properties.slug + \".pdf\")(\"download\", ctx_r1.currentTrek.properties.slug + \".pdf\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"href\", ctx_r1.apiUrl + \"/\" + ctx_r1.currentTrek.properties.id + \"/\" + ctx_r1.currentTrek.properties.slug + \".gpx\")(\"download\", ctx_r1.currentTrek.properties.slug + \".gpx\");\n  }\n}\n\nfunction TrekDetailsPage_ion_buttons_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-buttons\", 17)(1, \"ion-button\", 18);\n    i0.ɵɵlistener(\"click\", function TrekDetailsPage_ion_buttons_8_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.shareTrek();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelement(4, \"ion-icon\", 19);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"trek.share\"), \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_container_10_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelement(2, \"ion-spinner\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction TrekDetailsPage_ng_container_10_ng_template_2_app_connect_error_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-connect-error\", 23);\n    i0.ɵɵlistener(\"retry\", function TrekDetailsPage_ng_container_10_ng_template_2_app_connect_error_0_Template_app_connect_error_retry_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(3);\n      return ctx_r19.refresh();\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(1, 3, \"error.title\"))(\"content\", i0.ɵɵpipeBind1(2, 5, \"error.contentTrekMap\"))(\"buttonText\", i0.ɵɵpipeBind1(3, 7, \"error.buttonText\"));\n  }\n}\n\nfunction TrekDetailsPage_ng_container_10_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TrekDetailsPage_ng_container_10_ng_template_2_app_connect_error_0_Template, 4, 9, \"app-connect-error\", 22);\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.connectionError && !ctx_r17.offline);\n  }\n}\n\nfunction TrekDetailsPage_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_container_10_ng_container_1_Template, 3, 0, \"ng-container\", 6);\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_container_10_ng_template_2_Template, 1, 1, \"ng-template\", null, 20, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r16 = i0.ɵɵreference(3);\n\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.connectionError && !ctx_r3.offline && !ctx_r3.currentTrek)(\"ngIfElse\", _r16);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_ion_fab_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-fab\", 25)(1, \"ion-fab-button\", 26);\n    i0.ɵɵelement(2, \"ion-icon\", 27);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r21.mapLink);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_slides_1_ion_slide_1_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const picture_r50 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"(\", picture_r50.author, \")\");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_slides_1_ion_slide_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-slide\")(1, \"div\", 37);\n    i0.ɵɵelement(2, \"ion-img\", 38);\n    i0.ɵɵelementStart(3, \"div\", 39);\n    i0.ɵɵtext(4);\n    i0.ɵɵtemplate(5, TrekDetailsPage_ng_template_11_div_1_ion_slides_1_ion_slide_1_span_5_Template, 2, 1, \"span\", 9);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const picture_r50 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", picture_r50.url)(\"alt\", picture_r50.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", picture_r50.legend, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !!picture_r50.author);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_slides_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-slides\", 35);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_ion_slides_1_ion_slide_1_Template, 6, 4, \"ion-slide\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r23.pictures);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 40);\n    i0.ɵɵelement(2, \"div\", 41);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r24.currentTrek.properties.description_teaser, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 42);\n    i0.ɵɵelement(2, \"div\", 41);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r25.currentTrek.properties.ambiance, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 1, \"trek.details.parents\"), \" \");\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"next-previous-stage\": a0,\n    \"is-alone\": a1\n  };\n};\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_6_ion_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-button\", 47);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelement(3, \"ion-icon\", 48);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r53 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"routerLink\", ctx_r53.goToStep(ctx_r53.previousTrek.properties.id))(\"ngClass\", i0.ɵɵpureFunction2(7, _c0, ctx_r53.nextTrek, !ctx_r53.nextTrek));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(2, 5, \"trek.details.stage\"), \" \", ctx_r53.stageIndex, \" - \", ctx_r53.previousTrek.properties.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_6_ion_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-button\", 49);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelement(3, \"ion-icon\", 50);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r54 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"routerLink\", ctx_r54.goToStep(ctx_r54.nextTrek.properties.id))(\"ngClass\", i0.ɵɵpureFunction2(7, _c0, ctx_r54.previousTrek, !ctx_r54.previousTrek));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", i0.ɵɵpipeBind1(2, 5, \"trek.details.stage\"), \" \", ctx_r54.stageIndex + 2, \" - \", ctx_r54.nextTrek.properties.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 43)(2, \"div\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 44);\n    i0.ɵɵtemplate(8, TrekDetailsPage_ng_template_11_div_1_ion_row_6_ion_button_8_Template, 4, 10, \"ion-button\", 45);\n    i0.ɵɵtemplate(9, TrekDetailsPage_ng_template_11_div_1_ion_row_6_ion_button_9_Template, 4, 10, \"ion-button\", 46);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r27.parentTrek.properties.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r27.parentTrek.properties.children.features.length, \" \", i0.ɵɵpipeBind1(6, 5, \"trek.details.stages\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r27.previousTrek);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r27.nextTrek);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r56 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-button\", 51);\n    i0.ɵɵlistener(\"click\", function TrekDetailsPage_ng_template_11_div_1_ion_row_13_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r56);\n      i0.ɵɵnextContext();\n\n      const _r39 = i0.ɵɵreference(30);\n\n      const ctx_r55 = i0.ɵɵnextContext(2);\n      return ctx_r55.scrollToStages(_r39);\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r28 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r28.currentTrek.properties.children.features.length, \" \", i0.ɵɵpipeBind1(4, 2, \"trek.details.stages\"), \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r61 = i0.ɵɵnextContext(6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(2, 2, \"trek.details.city\"), \" \", ctx_r61.currentTrek.properties.departure_city == null ? null : ctx_r61.currentTrek.properties.departure_city.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-text\", 0)(2, \"h5\", 53);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_1_div_5_Template, 3, 4, \"div\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r59 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, \"trek.details.departure\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r59.currentTrek.properties.departure_city);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r59.currentTrek.properties.departure, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r62 = i0.ɵɵnextContext(6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(2, 2, \"trek.details.city\"), \" \", ctx_r62.currentTrek.properties.arrival_city == null ? null : ctx_r62.currentTrek.properties.arrival_city.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-text\", 0)(2, \"h5\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_2_div_5_Template, 3, 4, \"div\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r60 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"trek.details.arrival\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r60.currentTrek.properties.arrival_city);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r60.currentTrek.properties.arrival, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_1_Template, 7, 5, \"div\", 9);\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_div_2_Template, 7, 5, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r57 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r57.currentTrek.properties.departure && ctx_r57.currentTrek.properties.departure.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r57.currentTrek.properties.arrival && ctx_r57.currentTrek.properties.arrival.length > 0);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_3_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r63 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(2, 2, \"trek.details.city\"), \" \", ctx_r63.currentTrek.properties.departure_city == null ? null : ctx_r63.currentTrek.properties.departure_city.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"ion-text\", 0)(2, \"h5\", 53);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵtemplate(6, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_3_div_6_Template, 3, 4, \"div\", 9);\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r58 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, \"trek.details.departureArrival\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r58.currentTrek.properties.departure_city);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r58.currentTrek.properties.departure);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\");\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_2_Template, 3, 2, \"div\", 52);\n    i0.ɵɵtemplate(3, TrekDetailsPage_ng_template_11_div_1_ion_row_14_div_3_Template, 9, 5, \"div\", 52);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r29 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r29.currentTrek.properties.departure || ctx_r29.currentTrek.properties.arrival) && ctx_r29.currentTrek.properties.departure !== ctx_r29.currentTrek.properties.arrival);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r29.currentTrek.properties.departure || ctx_r29.currentTrek.properties.arrival) && ctx_r29.currentTrek.properties.departure === ctx_r29.currentTrek.properties.arrival);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_17_span_2_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r66 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(2, 1, 60 * (ctx_r66.currentTrek.properties.duration % 1), \"1.0-0\"), \"min\");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_17_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵpipe(3, \"lowerRound\");\n    i0.ɵɵtemplate(4, TrekDetailsPage_ng_template_11_div_1_div_17_span_2_span_4_Template, 3, 4, \"span\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r64 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 2, i0.ɵɵpipeBind1(3, 5, ctx_r64.currentTrek.properties.duration), \"1.0-0\"), \"h\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r64.currentTrek.properties.duration % 1 > 0);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_17_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r65 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, ctx_r65.currentTrek.properties.duration / 24, \"1.0-0\"), \"j\");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵelement(1, \"ion-icon\", 55);\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_template_11_div_1_div_17_span_2_Template, 5, 7, \"span\", 9);\n    i0.ɵɵtemplate(3, TrekDetailsPage_ng_template_11_div_1_div_17_span_3_Template, 3, 4, \"span\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r30.currentTrek.properties.duration < 24);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r30.currentTrek.properties.duration >= 24);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵelement(1, \"ion-icon\", 56);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r31.currentTrek.properties.ascent, \" m \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵelement(1, \"ion-icon\", 57);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r32.currentTrek.properties.route.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_21_ion_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 59);\n  }\n\n  if (rf & 2) {\n    const ctx_r67 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"src\", ctx_r67.trekExtraDetails.difficulty);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_div_21_ion_img_1_Template, 1, 1, \"ion-img\", 58);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r33.currentTrek.properties.difficulty.pictogram);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r33.currentTrek.properties.difficulty.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵelement(1, \"ion-icon\", 60);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r34 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(3, 1, ctx_r34.currentTrek.properties.length / 1000, \"1.1-1\", \"fr\"), \" km \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_23_ion_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 59);\n  }\n\n  if (rf & 2) {\n    const ctx_r68 = i0.ɵɵnextContext(4);\n    i0.ɵɵstyleProp(\"background-color\", ctx_r68.currentTrek.properties.practice.color);\n    i0.ɵɵproperty(\"src\", ctx_r68.trekExtraDetails.practice);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_div_23_ion_img_1_Template, 1, 3, \"ion-img\", 61);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r35 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r35.currentTrek.properties.practice.pictogram);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r35.currentTrek.properties.practice.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_24_ion_col_6_ion_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 59);\n  }\n\n  if (rf & 2) {\n    const theme_r70 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", theme_r70.url);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_24_ion_col_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 32)(1, \"div\");\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_template_11_div_1_ion_row_24_ion_col_6_ion_img_2_Template, 1, 1, \"ion-img\", 58);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const theme_r70 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", theme_r70.pictogram);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", theme_r70.name, \" \");\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 62)(2, \"ion-text\", 0)(3, \"h5\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, TrekDetailsPage_ng_template_11_div_1_ion_row_24_ion_col_6_Template, 4, 2, \"ion-col\", 63);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r36 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 2, \"trek.details.theme\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r36.trekExtraDetails.themes);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-text\", 0)(2, \"h2\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(5, \"div\", 64);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r37 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 2, \"trek.details.description\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r37.currentTrek.properties.description, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_28_div_4_ion_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 59);\n  }\n\n  if (rf & 2) {\n    const network_r74 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", network_r74.url);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_28_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_div_28_div_4_ion_img_1_Template, 1, 1, \"ion-img\", 58);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const network_r74 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", network_r74.pictogram);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(network_r74.name);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"ion-text\", 0)(2, \"h5\", 65);\n    i0.ɵɵtext(3, \"Balisage\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, TrekDetailsPage_ng_template_11_div_1_div_28_div_4_Template, 4, 2, \"div\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r38 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r38.trekExtraDetails.networks);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_31_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 68);\n    i0.ɵɵelement(1, \"app-trek-card\", 69);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trek_r78 = ctx.$implicit;\n    const indexStage_r79 = ctx.index;\n    const ctx_r77 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"isStage\", true)(\"numStage\", indexStage_r79 + 1)(\"parentId\", ctx_r77.currentTrek.properties.id)(\"showAllData\", true)(\"trek\", trek_r78)(\"offline\", ctx_r77.offline);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"div\")(3, \"ion-text\", 0)(4, \"h2\", 30);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 66);\n    i0.ɵɵtemplate(8, TrekDetailsPage_ng_template_11_div_1_ion_row_31_div_8_Template, 2, 6, \"div\", 67);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r40 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(6, 3, \"trek.details.stages\"), \" (\", ctx_r40.currentTrek.properties.children.features.length, \") \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r40.currentTrek.properties.children.features);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\");\n    i0.ɵɵelement(7, \"ion-img\", 70);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r41 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, \"trek.details.profile\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r41.trekExtraDetails.profile);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_33_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"ion-img\", 71);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, TrekDetailsPage_ng_template_11_div_1_ion_row_33_div_9_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r42 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 3, \"trek.details.rules\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, \"trek.details.rulesDescription\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r42.showImgRulesIfParkCentered);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"div\", 41);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r43 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, \"trek.details.access\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r43.currentTrek.properties.access, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"div\", 41);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r44 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, \"trek.details.parking\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r44.currentTrek.properties.advised_parking, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"div\", 41);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r45 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, \"trek.details.advice\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r45.currentTrek.properties.advice, i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_37_div_6_ion_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 74);\n  }\n\n  if (rf & 2) {\n    const information_desk_r82 = i0.ɵɵnextContext().$implicit;\n    const ctx_r83 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"src\", ctx_r83.baseUrl + information_desk_r82.picture);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_37_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"h3\", 41);\n    i0.ɵɵtemplate(2, TrekDetailsPage_ng_template_11_div_1_ion_row_37_div_6_ion_img_2_Template, 1, 1, \"ion-img\", 72);\n    i0.ɵɵelement(3, \"div\", 41)(4, \"div\", 41);\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"a\", 73);\n    i0.ɵɵtext(9, \" Site web \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" - \");\n    i0.ɵɵelementStart(11, \"a\", 73);\n    i0.ɵɵtext(12, \" Email \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \" - \");\n    i0.ɵɵelementStart(14, \"a\", 73);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const information_desk_r82 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", information_desk_r82.name, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", information_desk_r82.picture && information_desk_r82.picture !== \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", information_desk_r82.description, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", information_desk_r82.street, i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", information_desk_r82.postal_code, \" \", information_desk_r82.municipality, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", information_desk_r82.website, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"href\", \"mailto:\" + information_desk_r82.email, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"href\", \"tel:\" + information_desk_r82.phone, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(information_desk_r82.phone);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, TrekDetailsPage_ng_template_11_div_1_ion_row_37_div_6_Template, 16, 10, \"div\", 36);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r46 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, \"trek.details.desk\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r46.currentTrek.properties.information_desks);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_38_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-poi\", 77);\n  }\n\n  if (rf & 2) {\n    const poi_r87 = ctx.item;\n    const ctx_r86 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"poi\", poi_r87)(\"commonSrc\", ctx_r86.commonSrc)(\"typePois\", ctx_r86.typePois)(\"offline\", ctx_r86.offline);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_ion_row_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, TrekDetailsPage_ng_template_11_div_1_ion_row_38_ng_template_6_Template, 1, 4, \"ng-template\", null, 75, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelement(8, \"app-collapsible-list\", 76);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const _r85 = i0.ɵɵreference(7);\n\n    const ctx_r47 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(5, 7, \"trek.details.poi.name\"), \" (\", ctx_r47.currentPois.length, \") \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"items\", ctx_r47.currentPois)(\"showAllLabel\", i0.ɵɵpipeBind1(9, 9, \"trek.details.poi.showAllLabel\"))(\"hideAllLabel\", i0.ɵɵpipeBind1(10, 11, \"trek.details.poi.hideAllLabel\"))(\"itemTemplate\", _r85)(\"initialSize\", ctx_r47.poiCollapseInitialSize);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_39_ion_row_1_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-poi\", 79);\n  }\n\n  if (rf & 2) {\n    const touristicContent_r92 = ctx.item;\n    const ctx_r91 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"poi\", touristicContent_r92)(\"offline\", ctx_r91.offline);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_39_ion_row_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\")(2, \"ion-text\", 0)(3, \"h2\", 30);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, TrekDetailsPage_ng_template_11_div_1_div_39_ion_row_1_ng_template_5_Template, 1, 2, \"ng-template\", null, 78, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelement(7, \"app-collapsible-list\", 76);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const touristicCategoryWithFeatures_r89 = ctx.$implicit;\n\n    const _r90 = i0.ɵɵreference(6);\n\n    const ctx_r88 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", touristicCategoryWithFeatures_r89.name, \" (\", touristicCategoryWithFeatures_r89.features.length, \") \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"items\", touristicCategoryWithFeatures_r89.features)(\"showAllLabel\", i0.ɵɵpipeBind1(8, 7, \"trek.details.touristicContent.showAllLabel\"))(\"hideAllLabel\", i0.ɵɵpipeBind1(9, 9, \"trek.details.touristicContent.hideAllLabel\"))(\"itemTemplate\", _r90)(\"initialSize\", ctx_r88.touristicContentCollapseInitialSize);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_div_39_ion_row_1_Template, 10, 11, \"ion-row\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r48 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r48.touristicCategoriesWithFeatures);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_ion_slides_1_Template, 2, 1, \"ion-slides\", 28);\n    i0.ɵɵelementStart(2, \"ion-grid\", 29);\n    i0.ɵɵtemplate(3, TrekDetailsPage_ng_template_11_div_1_ion_row_3_Template, 3, 1, \"ion-row\", 9);\n    i0.ɵɵtemplate(4, TrekDetailsPage_ng_template_11_div_1_ion_row_4_Template, 3, 1, \"ion-row\", 9);\n    i0.ɵɵtemplate(5, TrekDetailsPage_ng_template_11_div_1_ion_row_5_Template, 6, 3, \"ion-row\", 9);\n    i0.ɵɵtemplate(6, TrekDetailsPage_ng_template_11_div_1_ion_row_6_Template, 10, 7, \"ion-row\", 9);\n    i0.ɵɵelementStart(7, \"ion-row\")(8, \"ion-col\")(9, \"ion-text\", 0)(10, \"h2\", 30);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(13, TrekDetailsPage_ng_template_11_div_1_ion_row_13_Template, 5, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(14, TrekDetailsPage_ng_template_11_div_1_ion_row_14_Template, 4, 2, \"ion-row\", 9);\n    i0.ɵɵelementStart(15, \"ion-row\", 31)(16, \"ion-col\", 32);\n    i0.ɵɵtemplate(17, TrekDetailsPage_ng_template_11_div_1_div_17_Template, 4, 2, \"div\", 33);\n    i0.ɵɵtemplate(18, TrekDetailsPage_ng_template_11_div_1_div_18_Template, 3, 1, \"div\", 33);\n    i0.ɵɵtemplate(19, TrekDetailsPage_ng_template_11_div_1_div_19_Template, 3, 1, \"div\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-col\", 32);\n    i0.ɵɵtemplate(21, TrekDetailsPage_ng_template_11_div_1_div_21_Template, 3, 2, \"div\", 33);\n    i0.ɵɵtemplate(22, TrekDetailsPage_ng_template_11_div_1_div_22_Template, 4, 5, \"div\", 33);\n    i0.ɵɵtemplate(23, TrekDetailsPage_ng_template_11_div_1_div_23_Template, 3, 2, \"div\", 33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(24, TrekDetailsPage_ng_template_11_div_1_ion_row_24_Template, 7, 4, \"ion-row\", 9);\n    i0.ɵɵelementStart(25, \"ion-row\")(26, \"ion-col\");\n    i0.ɵɵtemplate(27, TrekDetailsPage_ng_template_11_div_1_div_27_Template, 6, 4, \"div\", 9);\n    i0.ɵɵtemplate(28, TrekDetailsPage_ng_template_11_div_1_div_28_Template, 5, 1, \"div\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", null, 34);\n    i0.ɵɵtemplate(31, TrekDetailsPage_ng_template_11_div_1_ion_row_31_Template, 9, 5, \"ion-row\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(32, TrekDetailsPage_ng_template_11_div_1_ion_row_32_Template, 8, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(33, TrekDetailsPage_ng_template_11_div_1_ion_row_33_Template, 10, 7, \"ion-row\", 9);\n    i0.ɵɵtemplate(34, TrekDetailsPage_ng_template_11_div_1_ion_row_34_Template, 7, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(35, TrekDetailsPage_ng_template_11_div_1_ion_row_35_Template, 7, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(36, TrekDetailsPage_ng_template_11_div_1_ion_row_36_Template, 7, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(37, TrekDetailsPage_ng_template_11_div_1_ion_row_37_Template, 7, 4, \"ion-row\", 9);\n    i0.ɵɵtemplate(38, TrekDetailsPage_ng_template_11_div_1_ion_row_38_Template, 11, 13, \"ion-row\", 9);\n    i0.ɵɵtemplate(39, TrekDetailsPage_ng_template_11_div_1_div_39_Template, 2, 1, \"div\", 9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.pictures && ctx_r22.currentTrek.properties.pictures.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.description_teaser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.ambiance);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.isStage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.isStage);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(12, 26, \"trek.details.features\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.isItinerancy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.departure || ctx_r22.currentTrek.properties.arrival);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.duration);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.ascent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.route);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.difficulty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.practice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.themes && ctx_r22.currentTrek.properties.themes.length > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.networks && ctx_r22.currentTrek.properties.networks.length > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.isItinerancy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.profile && ctx_r22.currentTrek.properties.profile !== \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.is_park_centered);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.access);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.advised_parking);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.advice);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentTrek.properties.information_desks && ctx_r22.currentTrek.properties.information_desks.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.currentPois && ctx_r22.currentPois.length > 0 && !ctx_r22.isItinerancy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.touristicCategoriesWithFeatures && ctx_r22.touristicCategoriesWithFeatures.length > 0 && !ctx_r22.isItinerancy);\n  }\n}\n\nfunction TrekDetailsPage_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TrekDetailsPage_ng_template_11_ion_fab_0_Template, 3, 1, \"ion-fab\", 24);\n    i0.ɵɵtemplate(1, TrekDetailsPage_ng_template_11_div_1_Template, 40, 28, \"div\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentTrek);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.currentTrek);\n  }\n}\n\nexport let TrekDetailsPage = /*#__PURE__*/(() => {\n  class TrekDetailsPage {\n    constructor(onlineTreks, offlineTreks, route, alertController, translate, modalController, platform, settings, loadingController, navController) {\n      this.onlineTreks = onlineTreks;\n      this.offlineTreks = offlineTreks;\n      this.route = route;\n      this.alertController = alertController;\n      this.translate = translate;\n      this.modalController = modalController;\n      this.platform = platform;\n      this.settings = settings;\n      this.loadingController = loadingController;\n      this.navController = navController;\n      this.offline = false;\n      this.baseUrl = environment.onlineBaseUrl;\n      this.showImgRulesIfParkCentered = environment.trekDetails.showImgRulesIfParkCentered;\n      this.treksUrl = '';\n      this.connectionError = false;\n      this.poiCollapseInitialSize = environment.poiCollapseInitialSize;\n      this.touristicContentCollapseInitialSize = environment.touristicContentCollapseInitialSize;\n      this.isItinerancy = false;\n      this.isStage = false;\n      this.isAvailableOffline = false;\n      this.apiUrl = `${environment.apiUrl}/${this.translate.getDefaultLang()}/treks`;\n      this.pictures = [];\n      this.trekExtraDetails = {\n        difficulty: '',\n        practice: '',\n        themes: [],\n        networks: [],\n        profile: ''\n      };\n    }\n\n    ngOnInit() {\n      this.loadTrek();\n    }\n\n    loadTrek() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const offline = !!this.route.snapshot.data['offline'];\n        const isStage = !!this.route.snapshot.data['isStage'];\n        const trekId = +this.route.snapshot.paramMap.get('trekId');\n        const stageId = +this.route.snapshot.paramMap.get('stageId');\n        const currentTrekId = isStage ? stageId : trekId;\n        const parentId = isStage ? trekId : undefined;\n        this.isAvailableOffline = yield this.offlineTreks.trekIsAvailableOffline(trekId);\n        const treksService = offline || this.isAvailableOffline ? this.offlineTreks : this.onlineTreks;\n        forkJoin([treksService.getTrekById(currentTrekId, parentId), treksService.getPoisForTrekById(currentTrekId, parentId), treksService.getTouristicContentsForTrekById(currentTrekId, parentId), treksService.getTouristicEventsForTrekById(currentTrekId, parentId), isStage && parentId ? treksService.getTrekById(parentId) : of(null)]).pipe(first()).subscribe(([trek, pois, touristicContents, touristicEvents, parentTrek]) => __awaiter(this, void 0, void 0, function* () {\n          this.connectionError = false;\n          const commonSrc = yield treksService.getCommonImgSrc();\n          const hydratedTrek = this.settings.getHydratedTrek(trek, commonSrc);\n          const touristicCategoriesWithFeatures = this.settings.getTouristicCategoriesWithFeatures(touristicContents);\n\n          if (this.settings.data$.value) {\n            this.typePois = this.settings.data$.value.find(setting => setting.id === 'poi_types');\n          }\n\n          this.isItinerancy = !!(hydratedTrek.properties.children && hydratedTrek.properties.children.features.length > 0);\n          this.offline = offline || this.isAvailableOffline;\n          this.currentTrek = hydratedTrek;\n          this.originalTrek = trek;\n          this.currentPois = pois.features;\n          this.treksTool = treksService;\n          this.touristicContents = touristicContents;\n          this.touristicCategoriesWithFeatures = touristicCategoriesWithFeatures;\n          this.touristicEvents = touristicEvents.features;\n          this.treksUrl = this.treksTool.getTreksUrl();\n          this.commonSrc = commonSrc;\n          this.mapLink = this.treksTool.getTrekMapUrl(hydratedTrek.properties.id, parentTrek ? parentTrek.properties.id : undefined);\n          this.isStage = isStage;\n\n          if (isStage && parentTrek) {\n            this.parentTrek = parentTrek;\n            this.stageIndex = this.parentTrek.properties.children.features.findIndex(children => children.properties.id === this.currentTrek.properties.id);\n\n            if (this.stageIndex > 0) {\n              this.previousTrek = this.parentTrek.properties.children.features[this.stageIndex - 1];\n            }\n\n            if (this.stageIndex < this.parentTrek.properties.children.features.length) {\n              this.nextTrek = this.parentTrek.properties.children.features[this.stageIndex + 1];\n            }\n          }\n\n          if (this.currentTrek.properties.difficulty && this.currentTrek.properties.difficulty.pictogram) {\n            this.trekExtraDetails.difficulty = yield this.getPictureSrc({\n              url: this.currentTrek.properties.difficulty.pictogram\n            });\n          }\n\n          if (this.currentTrek.properties.practice && this.currentTrek.properties.practice.pictogram) {\n            this.trekExtraDetails.practice = yield this.getPictureSrc({\n              url: this.currentTrek.properties.practice.pictogram\n            });\n          }\n\n          if (this.currentTrek.properties.profile && this.currentTrek.properties.profile !== '') {\n            this.trekExtraDetails.profile = yield this.getPictureSrc({\n              url: this.currentTrek.properties.profile\n            });\n          }\n\n          for (const network of this.currentTrek.properties.networks) {\n            this.trekExtraDetails.networks.push(Object.assign(Object.assign({}, network), {\n              url: yield this.getPictureSrc({\n                url: network.pictogram\n              })\n            }));\n          }\n\n          for (const theme of this.currentTrek.properties.themes) {\n            this.trekExtraDetails.themes.push(Object.assign(Object.assign({}, theme), {\n              url: yield this.getPictureSrc({\n                url: theme.pictogram\n              })\n            }));\n          }\n\n          for (const picture of this.currentTrek.properties.pictures) {\n            const url = yield this.getPictureSrc(picture);\n            this.pictures.push({\n              picture,\n              url\n            });\n          }\n\n          const settings = this.settings.data$.getValue();\n\n          if (settings) {\n            this.typePois = settings.find(setting => setting.id === 'poi_types');\n          }\n        }), () => {\n          this.connectionError = true;\n        });\n      });\n    }\n\n    downloadTrek() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const simpleTrek = this.onlineTreks.getMinimalTrekById(!this.isStage ? this.currentTrek.properties.id : this.parentTrek.properties.id);\n        const pois = !this.isStage ? this.currentPois : yield this.onlineTreks.getPoisForTrekById(this.parentTrek.properties.id).toPromise();\n        const touristicContents = !this.isStage ? this.currentPois : yield this.onlineTreks.getTouristicContentsForTrekById(this.parentTrek.properties.id).toPromise();\n\n        if (!simpleTrek) {\n          return;\n        }\n\n        this.offlineTreks.createNewProgressStream();\n        const modalProgress = yield this.modalController.create({\n          component: ProgressComponent,\n          cssClass: 'progress-modal'\n        });\n        yield modalProgress.present();\n        this.offlineTreks.saveTrek(simpleTrek, !this.isStage ? this.originalTrek : this.parentTrek, pois, touristicContents).subscribe(saveResult => __awaiter(this, void 0, void 0, function* () {\n          modalProgress.dismiss();\n          this.presentDownloadConfirm(true, saveResult);\n          this.isAvailableOffline = yield this.offlineTreks.trekIsAvailableOffline(this.currentTrek.properties.id);\n          this.loadTrek();\n        }), saveResult => {\n          modalProgress.dismiss();\n          this.presentDownloadConfirm(true, saveResult);\n        });\n      });\n    }\n\n    presentDownloadConfirm(isAlert, success) {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.translate.get('trek.downloadAlert').subscribe(trad => __awaiter(this, void 0, void 0, function* () {\n          const downloadConfirm = yield this.alertController.create({\n            header: trad.titleTrek,\n            message: isAlert ? success ? trad.success : trad.error : !this.isItinerancy && !this.isStage ? trad.contentTrek : trad.contentItinerancy,\n            buttons: isAlert ? [trad.confirmError] : [{\n              text: trad.cancelButton,\n              role: 'cancel',\n              cssClass: 'secondary'\n            }, {\n              text: trad.confirmButton,\n              handler: () => {\n                this.downloadTrek();\n              }\n            }]\n          });\n          yield downloadConfirm.present();\n        }));\n      });\n    }\n\n    getPictureSrc(picture) {\n      return __awaiter(this, void 0, void 0, function* () {\n        return yield this.treksTool.getTrekImageSrc(this.originalTrek, picture);\n      });\n    }\n\n    refresh() {\n      this.loadTrek();\n    }\n\n    shareTrek() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.platform.is('ios') || this.platform.is('android')) {\n          const onlineUrl = this.baseUrl.replace('mobile', '');\n          const url = environment.randoVersion === 3 ? `${onlineUrl}${this.translate.getDefaultLang()}/trek/${this.currentTrek.properties.id}-${this.currentTrek.properties.slug}/` : `${onlineUrl}${this.currentTrek.properties.practice.slug}/${this.currentTrek.properties.slug}/`;\n          const sharingOptions = {\n            text: this.currentTrek.properties.name,\n            title: environment.appName,\n            url\n          };\n          yield Share.share(sharingOptions);\n        }\n      });\n    }\n\n    scrollToStages(stages) {\n      stages.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n        inline: 'nearest'\n      });\n    }\n\n    goToStep(stepId) {\n      return `/trek-details${this.offline ? '-offline' : ''}/${this.parentTrek.properties.id}/${stepId}`;\n    }\n\n    clickDeleteConfirm($event) {\n      $event.stopPropagation();\n      this.presentDeleteConfirm();\n    }\n\n    deleteTrek() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const translationTrekCard = yield this.translate.get('trekCard').toPromise();\n        const loader = yield this.loadingController.create({\n          message: translationTrekCard.deletionInProgress\n        });\n        yield loader.present();\n        this.offlineTreks.removeTrek(this.currentTrek.properties.id, true).subscribe(() => {\n          loader.dismiss();\n          this.presentDeleteConfirm(true, translationTrekCard.trekIsDelete);\n          this.navController.pop();\n        }, () => {\n          loader.dismiss();\n          this.presentDeleteConfirm(true, translationTrekCard.errorWhileDeleting);\n        });\n      });\n    }\n\n    presentDeleteConfirm(isAlert, alertMsg) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const translationTrekCard = yield this.translate.get('trekCard').toPromise();\n        const deleteConfirm = yield this.alertController.create({\n          header: translationTrekCard.deleteTitle,\n          message: isAlert ? alertMsg : translationTrekCard.askDelete,\n          buttons: isAlert ? [translationTrekCard.confirmButton] : [{\n            text: translationTrekCard.cancelButton,\n            role: 'cancel',\n            cssClass: 'secondary'\n          }, {\n            text: translationTrekCard.deleteLabel,\n            handler: () => {\n              this.deleteTrek();\n            }\n          }]\n        });\n        yield deleteConfirm.present();\n      });\n    }\n\n  }\n\n  TrekDetailsPage.ɵfac = function TrekDetailsPage_Factory(t) {\n    return new (t || TrekDetailsPage)(i0.ɵɵdirectiveInject(i1.OnlineTreksService), i0.ɵɵdirectiveInject(i2.OfflineTreksService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.AlertController), i0.ɵɵdirectiveInject(i5.TranslateService), i0.ɵɵdirectiveInject(i4.ModalController), i0.ɵɵdirectiveInject(i4.Platform), i0.ɵɵdirectiveInject(i6.SettingsService), i0.ɵɵdirectiveInject(i4.LoadingController), i0.ɵɵdirectiveInject(i4.NavController));\n  };\n\n  TrekDetailsPage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TrekDetailsPage,\n    selectors: [[\"app-trek-details\"]],\n    decls: 13,\n    vars: 6,\n    consts: [[\"color\", \"primary\"], [\"slot\", \"start\"], [3, \"defaultHref\"], [\"class\", \"custom-title\", 4, \"ngIf\"], [\"class\", \"download-container\", 4, \"ngIf\"], [\"class\", \"share-container\", 4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"trekDetailTemplate\", \"\"], [1, \"custom-title\"], [4, \"ngIf\"], [1, \"download-container\"], [3, \"click\", 4, \"ngIf\"], [\"fill\", \"clear\", \"expand\", \"full\", 3, \"href\", \"download\"], [\"slot\", \"start\", \"name\", \"document\"], [3, \"click\"], [\"slot\", \"start\", \"name\", \"download\"], [\"slot\", \"start\", \"name\", \"trash\"], [1, \"share-container\"], [\"expand\", \"full\", 3, \"click\"], [\"slot\", \"start\", \"name\", \"share\"], [\"connectError\", \"\"], [1, \"spinner-container\"], [\"icon\", \"wifi\", 3, \"title\", \"content\", \"buttonText\", \"retry\", 4, \"ngIf\"], [\"icon\", \"wifi\", 3, \"title\", \"content\", \"buttonText\", \"retry\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\"], [1, \"no-outline\", 3, \"routerLink\"], [\"name\", \"map\"], [\"pager\", \"true\", 4, \"ngIf\"], [\"fixed\", \"\"], [1, \"custom-divider\"], [\"marginTop\", \"\", 1, \"font-medium\", \"ion-margin-top\"], [\"size\", \"6\"], [\"class\", \"extra-details\", 4, \"ngIf\"], [\"stages\", \"\"], [\"pager\", \"true\"], [4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"flex\", \"flex-direction\", \"column\", \"align-items\", \"center\", \"justify-content\", \"center\"], [3, \"src\", \"alt\"], [1, \"ion-padding-top\", \"legend-text\"], [1, \"bold\"], [3, \"innerHTML\"], [1, \"italic\"], [1, \"no-vertical-padding\"], [1, \"stage-container\"], [\"class\", \"stage-button stage-button-previous\", \"fill\", \"clear\", \"expand\", \"full\", \"size\", \"large\", 3, \"routerLink\", \"ngClass\", 4, \"ngIf\"], [\"class\", \"stage-button stage-button-next\", \"fill\", \"clear\", \"expand\", \"full\", \"size\", \"large\", 3, \"routerLink\", \"ngClass\", 4, \"ngIf\"], [\"fill\", \"clear\", \"expand\", \"full\", \"size\", \"large\", 1, \"stage-button\", \"stage-button-previous\", 3, \"routerLink\", \"ngClass\"], [\"name\", \"arrow-back\", \"slot\", \"start\"], [\"fill\", \"clear\", \"expand\", \"full\", \"size\", \"large\", 1, \"stage-button\", \"stage-button-next\", 3, \"routerLink\", \"ngClass\"], [\"name\", \"arrow-forward\", \"slot\", \"end\"], [\"fill\", \"outline\", 3, \"click\"], [\"class\", \"no-vertical-padding\", 4, \"ngIf\"], [1, \"no-margin-top\"], [1, \"extra-details\"], [\"name\", \"hourglass\", 1, \"icon-detail\"], [\"name\", \"trending-up\", 1, \"icon-detail\"], [\"name\", \"swap-horizontal-outline\", 1, \"icon-detail\"], [\"class\", \"icon-detail\", 3, \"src\", 4, \"ngIf\"], [1, \"icon-detail\", 3, \"src\"], [\"name\", \"resize\", 1, \"icon-detail\"], [\"class\", \"icon-detail\", 3, \"background-color\", \"src\", 4, \"ngIf\"], [\"size\", \"12\"], [\"size\", \"6\", 4, \"ngFor\", \"ngForOf\"], [1, \"trek-description\", 3, \"innerHTML\"], [1, \"inline\"], [\"scrollx\", \"true\", 1, \"treks-card-container\"], [\"class\", \"scroll-trek-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"scroll-trek-item\"], [3, \"isStage\", \"numStage\", \"parentId\", \"showAllData\", \"trek\", \"offline\"], [3, \"src\"], [\"src\", \"assets/image/reglementation.jpg\", \"alt\", \"rules\"], [\"class\", \"min-size-img\", 3, \"src\", 4, \"ngIf\"], [3, \"href\"], [1, \"min-size-img\", 3, \"src\"], [\"poiTemplate\", \"\"], [3, \"items\", \"showAllLabel\", \"hideAllLabel\", \"itemTemplate\", \"initialSize\"], [3, \"poi\", \"commonSrc\", \"typePois\", \"offline\"], [\"touristicContentTemplate\", \"\"], [3, \"poi\", \"offline\"]],\n    template: function TrekDetailsPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-buttons\", 1);\n        i0.ɵɵelement(3, \"ion-back-button\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, TrekDetailsPage_div_4_Template, 4, 2, \"div\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"ion-toolbar\");\n        i0.ɵɵtemplate(6, TrekDetailsPage_ion_buttons_6_Template, 9, 6, \"ion-buttons\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"ion-toolbar\");\n        i0.ɵɵtemplate(8, TrekDetailsPage_ion_buttons_8_Template, 5, 3, \"ion-buttons\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"ion-content\");\n        i0.ɵɵtemplate(10, TrekDetailsPage_ng_container_10_Template, 4, 2, \"ng-container\", 6);\n        i0.ɵɵtemplate(11, TrekDetailsPage_ng_template_11_Template, 2, 2, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r4 = i0.ɵɵreference(12);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"defaultHref\", ctx.treksUrl);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentTrek);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentTrek);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentTrek);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.connectionError && !ctx.offline || !ctx.connectionError && !ctx.offline && !ctx.currentTrek)(\"ngIfElse\", _r4);\n      }\n    },\n    directives: [i4.IonHeader, i4.IonToolbar, i4.IonButtons, i4.IonBackButton, i4.IonBackButtonDelegate, i7.NgIf, i4.IonText, i4.IonButton, i4.IonIcon, i4.IonContent, i4.IonSpinner, i8.ConnectErrorComponent, i4.IonFab, i4.IonFabButton, i4.RouterLinkDelegate, i3.RouterLink, i4.IonSlides, i7.NgForOf, i4.IonSlide, i4.IonImg, i4.IonGrid, i4.IonRow, i4.IonCol, i7.NgClass, i9.TrekCardComponent, i10.PoiComponent, i11.CollapsibleListComponent],\n    pipes: [i5.TranslatePipe, i7.DecimalPipe, i12.LowerRoundPipe],\n    styles: [\".bold[_ngcontent-%COMP%]{font-weight:500}.italic[_ngcontent-%COMP%]{font-style:italic}.font-medium[_ngcontent-%COMP%]{font-size:18px}.extra-details[_ngcontent-%COMP%]{line-height:1.5;display:flex;justify-content:flex-start;align-items:center}.icon-detail[_ngcontent-%COMP%]{width:24px;height:24px;display:inline-block;margin-right:5px}ion-header[_ngcontent-%COMP%]   .custom-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;letter-spacing:.0125em}.custom-divider[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px;padding:5px 10px;background:var(--ion-color-primary)!important;color:var(--ion-color-primary-contrast)}div[scrollx=true][_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch}div[scrollx=true][_ngcontent-%COMP%]::-webkit-scrollbar{display:none}div[scrollx=true][_ngcontent-%COMP%]   .scroll-trek-item[_ngcontent-%COMP%]{flex:0 0 auto;width:320px}.treks-card-container[_ngcontent-%COMP%]{margin-left:-10px;margin-right:-10px}.no-vertical-padding[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.no-margin-top[_ngcontent-%COMP%]{margin-top:0}.stage-button[_ngcontent-%COMP%]{width:calc(50% - 5px);white-space:pre-wrap;height:auto;min-height:2.8em;background-color:rgba(var(--ion-color-primary-rgb),.04);text-transform:none;font-size:16px}.is-alone[_ngcontent-%COMP%]{width:100%}.stage-button-previous[_ngcontent-%COMP%]{margin-left:0}.stage-button-next[_ngcontent-%COMP%]{margin-right:0}@media screen and (min-width: 540px){.next-previous-stage[_ngcontent-%COMP%]{max-width:50%}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-previous[_ngcontent-%COMP%]{margin-right:5px}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-next[_ngcontent-%COMP%]{margin-left:5px}}@media screen and (max-width: 540px){.next-previous-stage[_ngcontent-%COMP%]{width:100%}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-previous[_ngcontent-%COMP%]{margin-right:0}.next-previous-stage[_ngcontent-%COMP%]   .stage-button-next[_ngcontent-%COMP%]{margin-left:0}}.stage-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:5px}.download-container[_ngcontent-%COMP%], .share-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.download-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], .share-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%}\"]\n  });\n  return TrekDetailsPage;\n})();","map":null,"metadata":{},"sourceType":"module"}